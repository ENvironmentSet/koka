<!DOCTYPE html>
<html>
<!-- NO_CLICK_TRACKING -->

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>timezone.kk documentation</title>
</head>

<body class="koka doc body"><div class="madoko">
<pre class="koka source"><span class="comment">/&#42;----------------------------------------------------------------------------
   Copyright (C) 2012-2016 Microsoft Corporation

   Licensed under the Apache License, Version 2.0 ("The Licence"). You may not
   use this file except in compliance with the License. A copy of the License
   copyan be found in the file "license.txt" at the root of this distribution.
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Timezone support.

Can load timezone information from a time zone file using &#96;load-timezones&#96;.
The format of that file is [packed json]([packed json format](http://momentjs.com/timezone/docs/#/data-formats/packed-format).
The latest version can be found at: &lt;https://github.com/moment/moment-timezone/blob/develop/data/packed/latest.json&gt;.

&#96;&#96;&#96;
val tzs = load-timezones()
println( now().time(tzs.timezone("US/Pacific")).show )
val zlocal = tzs.guess-local-timezone()
println( now().time(zlocal).show + " (" + zlocal.tz-name + ")")
println( now().time(tz-local()).show )
&#96;&#96;&#96;
&#42;/</span>
<span class="kw">module</span> timezone

<span class="kw">import</span> async
<span class="kw">import</span> dict
<span class="kw">import</span> regex
<span class="kw">import</span> path
<span class="kw">import</span> file

<span class="kw">import</span> timestamp
<span class="kw">import</span> duration
<span class="kw">import</span> instant
<span class="kw">import</span> utc
<span class="kw">import</span> download
<span class="kw">import</span> calendar
<span class="kw">import</span> time
<span class="kw">import</span> chrono

<span class="kw">extern</span> include {
  js file <span class="st">"timezone-inline.js"</span>
}



<span class="comment">// Load a time zone information from a [packed json](http://momentjs.com/timezone/docs/#/data-formats/packed-format)
// format. Looks by default for the file &#96;fname&#96; (= &#96;"config/timezones.json"&#96; in the application directory).
// If the file is not present, it will be downloaded from &#96;url&#96;. The default &#96;url&#96; is:\
// &lt;https://raw.githubusercontent.com/moment/moment-timezone/develop/data/packed/latest.json&gt;\
// Set the &#96;url&#96; to the empty string to suppress automatic downloading.
// If the file is older than &#96;download-delay&#96; (=&#96;4.weeks&#96;) the file is automatically refreshed from &#96;url&#96;.
// The &#96;download-timeout&#96; (=&#96;10.seconds&#96;) gives the maximum time for downloading to finish.
// Set &#96;verbose&#96; to &#96;True&#96; to see trace messages.
</span><span class="decl-fun" id="load_timezones"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#load_timezones">load-timezones<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>load<span class="dash">-</span>timezones: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">url</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">download<span class="dash">-</span>delay</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">download<span class="dash">-</span>timeout</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">verbose</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">io</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">&gt;</span> <span class="tp">timezones</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp op">?</span><span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_os_path-source.html#path">path<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">path</span></span></a>(<span class="st">""</span>),
                           <a class="pp">url<span class="pc">url: <span class="tp op">?</span><span class="tp">string</span></span></a>   <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="st">"auto"</span>,
                           <a class="pp">download-delay<span class="pc">download<span class="dash">-</span>delay: <span class="tp op">?</span><span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a>   <span class="kw">=</span> <span class="number">4</span><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#weeks">weeks<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>weeks: <span class="tp sp">(</span><span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>,
                           <a class="pp">download-timeout<span class="pc">download<span class="dash">-</span>timeout: <span class="tp op">?</span><span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">10</span><span class="kw op">.</span><a class="pp" href="std_time_duration-source.html#seconds_1">seconds<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>seconds<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>,
                           <a class="pp">verbose<span class="pc">verbose: <span class="tp op">?</span><span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a>
                         ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="std_core-source.html#type_space_io"><span class="tp"><span class="effect">io</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>io: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp" href="std_async-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space_timezones"><span class="tp">timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones: <span class="tp">V</span></span></a>
{
  <span class="decl-fun" id="parse"><span class="kw">fun</span> <a class="pp">parse<span class="pc">parse: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">timezones</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_timezones"><span class="tp">timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
    (<a class="pp" href="std_core-source.html#try">try<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>try: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">hndl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a>{
       <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#parse_packed_zones">parse-packed-zones<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>packed<span class="dash">-</span>zones: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">timezones</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>))
     }
     <span class="kw">fun</span>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a>) {
       <a class="pp" href="std_core-source.html#trace">trace<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>trace: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<span class="st">"failed parse: "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">exn</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)
       <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
     })
  </span>}
  <span class="kw">val</span> <a class="pp">xfname<span class="pc">xfname: <span class="tp">path</span></span></a> <span class="kw">=</span> (<a class="pp">fname<span class="pc">fname: <span class="tp">path</span></span></a> <a class="pp" href="std_os_path-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp tpp">p1</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">p2</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">path</span></span></a> <a class="pp" href="std_os_path-source.html#appdir">appdir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>appdir: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp">path</span></span></a>() <a class="pp" href="std_os_path-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">p1</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">p2</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">path</span></span></a> <a class="pp" href="std_os_path-source.html#path">path<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">path</span></span></a>(<span class="st">"config/timezones.json"</span>))
  <span class="kw">val</span> <a class="pp">xurl<span class="pc">xurl: <span class="tp">string</span></span></a>   <span class="kw">=</span> (<span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">url</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="std_core-source.html#_eq__eq__3">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="st">"auto"</span>) <span class="kw">then</span> <span class="st">"https://raw.githubusercontent.com/moment/moment-timezone/develop/data/packed/latest.json"</span> <span class="kw">else</span> <a class="pp">url<span class="pc">url: <span class="tp">string</span></span></a>)
  <a class="pp" href="std_time_download-source.html#load_latest">load-latest<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>download<span class="fslash last">/</span></span>load<span class="dash">-</span>latest: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">url</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">parse</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">expire</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">current</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">download<span class="dash">-</span>timeout</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">download<span class="dash">-</span>delay</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">error<span class="dash">-</span>prefix</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">verbose</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">ndet</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">,</span><span class="tp">net</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>( <a class="pp">xfname<span class="pc">xfname: <span class="tp">path</span></span></a>, <a class="pp">xurl<span class="pc">xurl: <span class="tp">string</span></span></a>, <a class="pp">parse<span class="pc">parse: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">timezones</span><span class="tp sp">&gt;</span></span></a>, download<span class="dash">-</span>delay<span class="kw">=</span><a class="pp">download-delay<span class="pc">download<span class="dash">-</span>delay: <span class="tp">duration</span></span></a>, download<span class="dash">-</span>timeout<span class="kw">=</span><a class="pp">download-timeout<span class="pc">download<span class="dash">-</span>timeout: <span class="tp">duration</span></span></a>,
               error<span class="dash">-</span>prefix<span class="kw">=</span><span class="st">"load timezone table"</span>, verbose<span class="kw">=</span><a class="pp">verbose<span class="pc">verbose: <span class="tp">bool</span></span></a>)
</span>}


<span class="comment">/&#42;----------------------------------------------------------------------------
  Time zone info
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">// Describes time zone information with a name, population count, and a list of periods.
</span><span class="decl-type" id="type_space_timezone_info"><span class="kw">public</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Timezone_info"><a class="pp" href="std_time_timezone.html#type_space_timezone_info"><span class="tp">timezone-info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp">V</span></span></a>(
  <span class="decl-fun" id="name"><a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a></span>      <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>,
  <span class="decl-fun" id="population"><a class="pp">population<span class="pc">population: <span class="tp">int</span></span></a></span><span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>,
  <span class="decl-fun" id="periods"><a class="pp">periods<span class="pc">periods: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a></span>   <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_timezone_period"><span class="tp">timezone-period</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>period: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <span class="comment">// time decreasing list of time periods
</span>  <span class="decl-fun" id="aliased"><a class="pp">aliased<span class="pc">aliased: <span class="tp">bool</span></span></a></span>   <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a>                 <span class="comment">// is this an alias to another timezone? (used for timezone guessing)
</span></span></span>)


<span class="comment">// A period in a timezone where a specific time zone offset holds.
</span><span class="decl-type" id="type_space_timezone_period"><span class="kw">public</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Timezone_period"><a class="pp" href="std_time_timezone.html#type_space_timezone_period"><span class="tp">timezone-period</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>period: <span class="tp">V</span></span></a>(
  <span class="decl-fun" id="start"><a class="pp">start<span class="pc">start: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a></span> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <span class="comment">// Nothing = beginning of time
</span>  <span class="decl-fun" id="abbrv"><a class="pp">abbrv<span class="pc">abbrv: <span class="tp">string</span></span></a></span> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>,
  <span class="decl-fun" id="offset"><a class="pp">offset<span class="pc">offset: <span class="tp">duration</span></span></a></span><span class="tp kw op">:</span> <a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a>
</span></span>)

<span class="comment">// Zero time period
</span><span class="decl-val" id="timezone_period0"><span class="kw">val</span> <a class="pp" href="std_time_timezone.html#timezone_period0">timezone-period0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>period0: <span class="tp">timezone<span class="dash">-</span>period</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Timezone_period"><span class="co">Timezone-period</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>Timezone<span class="dash">-</span>period: <span class="tp sp">(</span><span class="tp tpp">start</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">abbrv</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">offset</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone<span class="dash">-</span>period</span></span></a>( <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>, <span class="st">"UTC"</span>, <a class="pp" href="std_time_duration-source.html#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>zero: <span class="tp">duration</span></span></a> </span>)

<span class="comment">// The time zone info for the UTC time zone.
</span><span class="decl-val" id="tzi_utc"><span class="kw">val</span> <a class="pp" href="std_time_timezone.html#tzi_utc">tzi-utc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>tzi<span class="dash">-</span>utc: <span class="tp">timezone<span class="dash">-</span>info</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timezone_info"><span class="tp">timezone-info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Timezone_info"><span class="co">Timezone-info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>Timezone<span class="dash">-</span>info: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">population</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">periods</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">aliased</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone<span class="dash">-</span>info</span></span></a>( <span class="st">"UTC"</span>, <span class="number">0</span>, <span class="kw">fun</span>(){ <a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> } </span>)

<span class="comment">// Find the DST offset for a particular instant &#96;i&#96; given a list of time zone periods
</span><span class="decl-fun" id="find_offset"><span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#find_offset">find-offset<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>find<span class="dash">-</span>offset: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">periods</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone<span class="dash">-</span>period</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a>, <a class="pp">periods<span class="pc">periods: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_timezone_period"><span class="tp">timezone-period</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>period: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_timezone_period"><span class="tp">timezone-period</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>period: <span class="tp">V</span></span></a> {
  <span class="kw">match</span>(<a class="pp">periods<span class="pc">periods: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a>) {
    <a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="#timezone_period0">timezone-period0<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>period0: <span class="tp">timezone<span class="dash">-</span>period</span></span></a>
    <a class="pp" href="std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">tzp<span class="pc">tzp: <span class="tp">timezone<span class="dash">-</span>period</span></span></a>,<a class="pp">earlier<span class="pc">earlier: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a>) <span class="kw op">-></span>
      <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">i</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_time_instant-source.html#_gt__eq_">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">tzp<span class="pc">tzp: <span class="tp">timezone<span class="dash">-</span>period</span></span></a><span class="kw op">.</span><a class="pp" href="#start">start<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>start: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>)) <span class="kw">then</span> {
        <span class="comment">//trace("timezone: " + tzp.abbrv + ", start: " + tzp.start.default(i).time.show)
</span>        <a class="pp">tzp<span class="pc">tzp: <span class="tp">timezone<span class="dash">-</span>period</span></span></a>
      } <span class="kw">else</span> <a class="pp" href="#find_offset">find-offset<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>find<span class="dash">-</span>offset: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">periods</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone<span class="dash">-</span>period</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>,<a class="pp">earlier<span class="pc">earlier: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a>)
  }
</span>}

<span class="comment">// Convert time zone information &#96;:timezone-info&#96; into a &#96;:timezone&#96; structure.
</span><span class="decl-fun" id="timezone"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">tzi</span> <span class="tp kw op">:</span> <span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>( <a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timezone_info"><span class="tp">timezone-info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_time_calendar-source.html#type_space_timezone"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>timezone: <span class="tp">V</span></span></a> {
  <span class="decl-fun" id="utc_offset"><span class="kw">fun</span> <a class="pp">utc-offset<span class="pc">utc<span class="dash">-</span>offset: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">duration</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space__lp__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a><a class="pp" href="std_core-source.html#type_space__lp__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> {
    <span class="kw">val</span> <a class="pp">tzp<span class="pc">tzp: <span class="tp">timezone<span class="dash">-</span>period</span></span></a> <span class="kw">=</span> <a class="pp" href="#find_offset">find-offset<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>find<span class="dash">-</span>offset: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">periods</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone<span class="dash">-</span>period</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_instant-source.html#use_timescale">use-timescale<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>use<span class="dash">-</span>timescale: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tscale</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp" href="std_time_utc-source.html#ts_unix">ts-unix<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>utc<span class="fslash last">/</span></span>ts<span class="dash">-</span>unix: <span class="tp">timescale</span></span></a>),(<a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#periods">periods<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>periods: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span><span class="tp sp">)</span></span></a>)())
    <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">tzp<span class="pc">tzp: <span class="tp">timezone<span class="dash">-</span>period</span></span></a><span class="kw op">.</span><a class="pp" href="#offset">offset<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>offset: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>,<a class="pp">tzp<span class="pc">tzp: <span class="tp">timezone<span class="dash">-</span>period</span></span></a><span class="kw op">.</span><a class="pp" href="#abbrv">abbrv<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>abbrv: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>
  </span>}
  <a class="pp" href="std_time_calendar-source.html#con_space_Timezone"><span class="co">calendar/Timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>Timezone: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">utc<span class="dash">-</span>delta</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">duration</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span><span class="tp sp">,</span> <span class="tp tpp">utc<span class="dash">-</span>inverse</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp sp">(</span><span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>(
    <a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>name: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>,
    <a class="pp">utc-offset<span class="pc">utc<span class="dash">-</span>offset: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">duration</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span></span></a>,
    <span class="kw">fun</span>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>) { <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> }
  )
</span>}

<span class="comment">// Show a time zone period.
</span><span class="decl-fun" id="show"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">tzp</span> <span class="tp kw op">:</span> <span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">tzp<span class="pc">tzp: <span class="tp">timezone<span class="dash">-</span>period</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timezone_period"><span class="tp">timezone-period</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>period: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp">tzp<span class="pc">tzp: <span class="tp">timezone<span class="dash">-</span>period</span></span></a><span class="kw op">.</span><a class="pp" href="#abbrv">abbrv<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>abbrv: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#pad_right">pad-right<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pad<span class="dash">-</span>right: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">width</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fill</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<span class="number">4</span>) <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">" "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">tzp<span class="pc">tzp: <span class="tp">timezone<span class="dash">-</span>period</span></span></a><span class="kw op">.</span><a class="pp" href="#offset">offset<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>offset: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_time-source.html#show_tzdelta">show-tzdelta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>show<span class="dash">-</span>tzdelta: <span class="tp sp">(</span><span class="tp tpp">delta</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">utc</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">hmsep</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">hrwidth</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(utc<span class="kw">=</span><span class="st">"+00:00"</span>) <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">" from "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">tzp<span class="pc">tzp: <span class="tp">timezone<span class="dash">-</span>period</span></span></a><span class="kw op">.</span><a class="pp" href="#start">start<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>start: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<span class="kw">fun</span>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>){ <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_time-source.html#time">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_time-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> })<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<span class="st">"-infinity"</span>)
</span>}

<span class="comment">// Show time zone information.
</span><span class="decl-fun" id="show_1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#show_1">show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>show<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">tzi</span> <span class="tp kw op">:</span> <span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">,</span> <span class="tp tpp">show<span class="dash">-</span>periods</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timezone_info"><span class="tp">timezone-info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp">V</span></span></a>, <a class="pp">show-periods<span class="pc">show<span class="dash">-</span>periods: <span class="tp op">?</span><span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a>  ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>name: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">", population: "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#population">population<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>population: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#show_1">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
    <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">show-periods<span class="pc">show<span class="dash">-</span>periods: <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">""</span> <span class="kw">else</span> <span class="st">":\n  "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#periods">periods<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>periods: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span><span class="tp sp">)</span></span></a>)()<span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">tzp</span> <span class="tp kw op">:</span> <span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timezone_period"><span class="tp">timezone-period</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>period: <span class="tp">V</span></span></a> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#join_3">join<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>join<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">sep</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<span class="st">"\n  "</span>))
</span>}


<span class="comment">/&#42;----------------------------------------------------------------------------
  Parse timezone info from packed JSON format as used by momentjs.
  Latest files can be found at:\
  &lt;https://github.com/moment/moment-timezone/blob/develop/data/packed/latest.json&gt;
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">// Parse time zone information from a [packed json format](http://momentjs.com/timezone/docs/#/data-formats/packed-format).\
</span><span class="decl-fun" id="parse_packed_zones"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#parse_packed_zones">parse-packed-zones<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>packed<span class="dash">-</span>zones: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">timezones</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a> <a class="pp" href="#type_space_timezones"><span class="tp">timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones: <span class="tp">V</span></span></a> {
  <span class="comment">// zones
</span>  <span class="kw">val</span> <a class="pp">zonesfld<span class="pc">zonesfld: <span class="tp">string</span></span></a> <span class="kw">=</span> <span class="kw">match</span>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#find">find<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>find: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">matched</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#rxzones">rxzones<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxzones: <span class="tp">regex</span></span></a>)) {
    <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>   <span class="kw op">-></span> <a class="pp" href="std_core-source.html#error">error<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>(<span class="st">"invalid timezone data; cannot find zones array."</span>)
    <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a>) <span class="kw op">-></span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">1</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#trim">trim<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>trim: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
  }
  <span class="kw">val</span> <a class="pp">zonesarr<span class="pc">zonesarr: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">zonesfld<span class="pc">zonesfld: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#lines">lines<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>lines: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>( <span class="kw">fun</span>(<a class="pp">line<span class="pc">line: <span class="tp">string</span></span></a>) {
    <span class="kw">match</span>(<a class="pp">line<span class="pc">line: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#find">find<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>find: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">matched</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#rxzone">rxzone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxzone: <span class="tp">regex</span></span></a>)) {
      <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>   <span class="kw op">-></span> <a class="pp" href="std_core-source.html#error">error<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>(<span class="st">"invalid timezone info:\n  "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">line<span class="pc">line: <span class="tp">string</span></span></a>)
      <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a>) <span class="kw op">-></span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">1</span>]
    }
  })
  <span class="kw">val</span> <a class="pp">zones<span class="pc">zones: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">zonesarr<span class="pc">zonesarr: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#parse_packed_zone">parse-packed-zone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>packed<span class="dash">-</span>zone: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">timezone<span class="dash">-</span>info</span></span></a>)
  <span class="kw">val</span> <a class="pp">zdict<span class="pc">zdict: <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">zones<span class="pc">zones: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<span class="kw">fun</span>(<a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a>){ <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>name: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#normalize">normalize<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>normalize: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>, <a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> })<span class="kw op">.</span><a class="pp" href="std_data_dict-source.html#dict_1">dict<span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>dict<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">elems</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>

  <span class="comment">// links
</span>  <span class="kw">val</span> <a class="pp">linksfld<span class="pc">linksfld: <span class="tp">string</span></span></a> <span class="kw">=</span> <span class="kw">match</span>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#find">find<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>find: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">matched</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#rxlinks">rxlinks<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxlinks: <span class="tp">regex</span></span></a>)) {
    <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>   <span class="kw op">-></span> <a class="pp" href="std_core-source.html#error">error<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>(<span class="st">"invalid timezone data; cannot find links array."</span>)
    <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a>) <span class="kw op">-></span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">1</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#trim">trim<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>trim: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
  }
  <span class="kw">val</span> <a class="pp">links<span class="pc">links: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">linksfld<span class="pc">linksfld: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#lines">lines<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>lines: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>( <span class="kw">fun</span>(<a class="pp">line<span class="pc">line: <span class="tp">string</span></span></a>) {
    <span class="kw">match</span>(<a class="pp">line<span class="pc">line: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#find">find<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>find: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">matched</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#rxlink">rxlink<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxlink: <span class="tp">regex</span></span></a>)) {
      <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>   <span class="kw op">-></span> <a class="pp" href="std_core-source.html#error">error<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>(<span class="st">"invalid timezone link:\n  "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">line<span class="pc">line: <span class="tp">string</span></span></a>)
      <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a>) <span class="kw op">-></span> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">1</span>],<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">2</span>]<a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>
    }
  })

  <span class="kw">val</span> <a class="pp">ldict<span class="pc">ldict: <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">links<span class="pc">links: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>( <span class="kw">fun</span>(<a class="pp">link<span class="pc">link: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span></span></a>) {
    <span class="kw">val</span> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">key<span class="pc">key: <span class="tp">string</span></span></a>,<a class="pp">other<span class="pc">other: <span class="tp">string</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp">link<span class="pc">link: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span></span></a>
    <span class="kw">match</span>(<a class="pp">zdict<span class="pc">zdict: <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_data_dict-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">key</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp">key<span class="pc">key: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#normalize">normalize<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>normalize: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>]) {
      <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>  <span class="kw op">-></span> <a class="pp" href="std_core-source.html#error">error<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>(<span class="st">"invalid timezone link: unknown time zone: "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">key<span class="pc">key: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#normalize">normalize<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>normalize: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">", to: "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">other<span class="pc">other: <span class="tp">string</span></span></a> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">", "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">zdict<span class="pc">zdict: <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_data_dict-source.html#keys_1">keys<span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>keys<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#join_1">join<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>join<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">v</span> <span class="tp kw op">:</span> <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">sep</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">string</span></span></a>(<span class="st">"\n"</span>))
      <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">tz<span class="pc">tz: <span class="tp">timezone<span class="dash">-</span>info</span></span></a>) <span class="kw op">-></span> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">other<span class="pc">other: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#normalize">normalize<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>normalize: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>,<a class="pp">tz<span class="pc">tz: <span class="tp">timezone<span class="dash">-</span>info</span></span></a>(name<span class="kw">=</span><a class="pp">other<span class="pc">other: <span class="tp">string</span></span></a>,aliased<span class="kw">=</span><a class="pp" href="std_core-source.html#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a>)<a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>
    }
  })<span class="kw op">.</span><a class="pp" href="std_data_dict-source.html#dict_1">dict<span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>dict<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">elems</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>

  <span class="comment">// return zones + links
</span>  <a class="pp" href="#con_space_Timezones"><span class="co">Timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>Timezones: <span class="tp sp">(</span><span class="tp tpp">tzones</span> <span class="tp kw op">:</span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezones</span></span></a>( <a class="pp">zdict<span class="pc">zdict: <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_data_dict-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>(+): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">d1</span> <span class="tp kw op">:</span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">d2</span> <span class="tp kw op">:</span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <a class="pp">ldict<span class="pc">ldict: <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a> )
</span>}
<span class="decl-val" id="rxzones"><span class="kw">val</span> <a class="pp" href="std_time_timezone.html#rxzones">rxzones<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxzones: <span class="tp">regex</span></span></a> <span class="kw">=</span> <a class="pp" href="std_text_regex-source.html#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<span class="st">"\"zones\"\\s&#42;:\\s&#42;\\[([\\s\\S]&#42;?)^[ \\t]&#42;\\]"</span>, multiLine<span class="kw">=</span><a class="pp" href="std_core-source.html#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a></span>)
<span class="decl-val" id="rxzone"><span class="kw">val</span> <a class="pp" href="std_time_timezone.html#rxzone">rxzone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxzone: <span class="tp">regex</span></span></a>  <span class="kw">=</span> <a class="pp" href="std_text_regex-source.html#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<span class="st">"^\\s&#42;\"([^\"]+)\",?\\s&#42;$"</span></span>)
<span class="decl-val" id="rxlinks"><span class="kw">val</span> <a class="pp" href="std_time_timezone.html#rxlinks">rxlinks<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxlinks: <span class="tp">regex</span></span></a> <span class="kw">=</span> <a class="pp" href="std_text_regex-source.html#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<span class="st">"\"links\"\\s&#42;:\\s&#42;\\[([\\s\\S]&#42;?)^[ \\t]&#42;\\]"</span>, multiLine<span class="kw">=</span><a class="pp" href="std_core-source.html#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a></span>)
<span class="decl-val" id="rxlink"><span class="kw">val</span> <a class="pp" href="std_time_timezone.html#rxlink">rxlink<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxlink: <span class="tp">regex</span></span></a>  <span class="kw">=</span> <a class="pp" href="std_text_regex-source.html#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<span class="st">"^\\s&#42;\"([^\"\\|]+)\\|([^\"\\|]+)\",?\\s&#42;$"</span></span>)


<span class="decl-fun" id="parse_packed_zone"><span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#parse_packed_zone">parse-packed-zone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>packed<span class="dash">-</span>zone: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">timezone<span class="dash">-</span>info</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a> <a class="pp" href="#type_space_timezone_info"><span class="tp">timezone-info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp">V</span></span></a> {
  <span class="comment">//trace("parseing: " + s)
</span>  <span class="kw">val</span> <a class="pp">parts<span class="pc">parts: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>     <span class="kw">=</span> <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#split_1">split<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>split<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sep</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>(<span class="st">"|"</span>)
  <span class="kw">val</span> <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a>      <span class="kw">=</span> <a class="pp">parts<span class="pc">parts: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><span class="number">0</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<span class="st">""</span>)
  <span class="kw">val</span> <a class="pp">abbrs<span class="pc">abbrs: <span class="tp">string</span></span></a>     <span class="kw">=</span> <a class="pp">parts<span class="pc">parts: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><span class="number">1</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<span class="st">""</span>)
  <span class="kw">val</span> <a class="pp">offsets<span class="pc">offsets: <span class="tp">string</span></span></a>   <span class="kw">=</span> <a class="pp">parts<span class="pc">parts: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><span class="number">2</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<span class="st">"0"</span>)
  <span class="kw">val</span> <a class="pp">indices<span class="pc">indices: <span class="tp">string</span></span></a>   <span class="kw">=</span> <a class="pp">parts<span class="pc">parts: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><span class="number">3</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<span class="st">"0"</span>)
  <span class="kw">val</span> <a class="pp">xdiffs<span class="pc">xdiffs: <span class="tp">string</span></span></a>    <span class="kw">=</span> <a class="pp">parts<span class="pc">parts: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><span class="number">4</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<span class="st">""</span>)
  <span class="kw">val</span> <a class="pp">population<span class="pc">population: <span class="tp">int</span></span></a><span class="kw">=</span> <a class="pp">parts<span class="pc">parts: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><span class="number">5</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<span class="st">"0"</span>)<span class="kw op">.</span><a class="pp" href="#parse_base60">parse-base60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>base60: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">int</span></span></a>
  <span class="comment">// delay parsing the periods until needed
</span>  <span class="kw">val</span> <a class="pp">periods<span class="pc">periods: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a>   <span class="kw">=</span> <a class="pp" href="std_core-source.html#once">once<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>once: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">calc</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span><span class="tp sp">)</span></span></a>{ <a class="pp" href="#parse_packed_periods">parse-packed-periods<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>packed<span class="dash">-</span>periods: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sabbrs</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">soffsets</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sindices</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sxdiffs</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a>, <a class="pp">abbrs<span class="pc">abbrs: <span class="tp">string</span></span></a>,<a class="pp">offsets<span class="pc">offsets: <span class="tp">string</span></span></a>,<a class="pp">indices<span class="pc">indices: <span class="tp">string</span></span></a>,<a class="pp">xdiffs<span class="pc">xdiffs: <span class="tp">string</span></span></a>) }
  <a class="pp" href="#con_space_Timezone_info"><span class="co">Timezone-info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>Timezone<span class="dash">-</span>info: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">population</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">periods</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">aliased</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone<span class="dash">-</span>info</span></span></a>( <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a>, <a class="pp">population<span class="pc">population: <span class="tp">int</span></span></a>, <a class="pp">periods<span class="pc">periods: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a>, <a class="pp" href="std_core-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a> )
</span>}

<span class="decl-fun" id="parse_packed_periods"><span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#parse_packed_periods">parse-packed-periods<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>packed<span class="dash">-</span>periods: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sabbrs</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">soffsets</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sindices</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sxdiffs</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">sabbrs<span class="pc">sabbrs: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">soffsets<span class="pc">soffsets: <span class="tp">string</span></span></a> <span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">sindices<span class="pc">sindices: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">sxdiffs<span class="pc">sxdiffs: <span class="tp">string</span></span></a> <span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_timezone_period"><span class="tp">timezone-period</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>period: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>
{
  <a class="pp" href="std_core-source.html#try">try<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>try: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">hndl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a> {
    <span class="kw">val</span> <a class="pp">abbrs<span class="pc">abbrs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>   <span class="kw">=</span> <a class="pp">sabbrs<span class="pc">sabbrs: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#split_1">split<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>split<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sep</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>(<span class="st">" "</span>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#filter">filter<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>filter: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="std_core-source.html#notempty_ques__1">notempty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>notempty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
    <span class="kw">val</span> <a class="pp">offsets<span class="pc">offsets: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">soffsets<span class="pc">soffsets: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#split_1">split<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>split<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sep</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>(<span class="st">" "</span>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#filter">filter<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>filter: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="std_core-source.html#notempty_ques__1">notempty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>notempty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#parse_fixed_base60">parse-fixed-base60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>fixed<span class="dash">-</span>base60: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">double</span></span></a>)
    <span class="kw">val</span> <a class="pp">indices<span class="pc">indices: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">int</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">sindices<span class="pc">sindices: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#list_4">list<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#digit60">digit60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>digit60: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">int</span></span></a>)
    <span class="kw">val</span> <a class="pp">xdiffs<span class="pc">xdiffs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a>  <span class="kw">=</span> <a class="pp">sxdiffs<span class="pc">sxdiffs: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#split_1">split<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>split<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sep</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>(<span class="st">" "</span>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#filter">filter<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>filter: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="std_core-source.html#notempty_ques__1">notempty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>notempty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#parse_fixed_base60">parse-fixed-base60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>fixed<span class="dash">-</span>base60: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">double</span></span></a>)
    <span class="decl-fun" id="from_indices"><span class="kw">fun</span> <a class="pp">from-indices<span class="pc">from<span class="dash">-</span>indices: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">def</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;7393</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <a class="pp">def<span class="pc">def: <span class="tp tv">&#95;7393</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
      <a class="pp">indices<span class="pc">indices: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">int</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>( <span class="kw">fun</span>(<a class="pp">idx<span class="pc">idx: <span class="tp">int</span></span></a>) {<a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;7393</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp">idx<span class="pc">idx: <span class="tp">int</span></span></a>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<a class="pp">def<span class="pc">def: <span class="tp tv">&#95;7393</span></span></a>) })<span class="kw op">.</span><a class="pp" href="std_core-source.html#reverse">reverse<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>reverse: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
    </span>}
    <span class="kw">val</span> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">start0<span class="pc">start0: <span class="tp">double</span></span></a>,<a class="pp">diffs<span class="pc">diffs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <span class="kw">match</span>(<a class="pp">xdiffs<span class="pc">xdiffs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a>) {
      <a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><span class="number">0.0</span>,<a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>
      <a class="pp" href="std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">start<span class="pc">start: <span class="tp">double</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a>) <span class="kw op">-></span> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">start<span class="pc">start: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">60.0</span>, <a class="pp" href="std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<span class="number">0.0</span>,<a class="pp">rest<span class="pc">rest: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a>)<a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>
    }
    <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">diffs</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#length_1">length<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>length<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">1</span> <a class="pp" href="std_core-source.html#_excl__eq__1">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">indices<span class="pc">indices: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">int</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#length_1">length<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>length<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> ) <a class="pp" href="std_core-source.html#error">error<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>(<span class="st">"invalid timezone data:\n  diffs: "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">sxdiffs<span class="pc">sxdiffs: <span class="tp">string</span></span></a> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">"\n  ind  : "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">sindices<span class="pc">sindices: <span class="tp">string</span></span></a>  <a class="pp" href="std_core-source.html#con_space__lp__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a>
    <span class="kw">val</span> <a class="pp">endings<span class="pc">endings: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">diffs<span class="pc">diffs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#foldl">foldl<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>foldl: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp sp">(</span><span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span></span></a>(<a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">start0<span class="pc">start0: <span class="tp">double</span></span></a>,<a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>, <span class="kw">fun</span>(<a class="pp">acc<span class="pc">acc: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span></span></a><span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space__lp__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><a class="pp" href="std_core-source.html#type_space__lp__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a>,<a class="pp">diff<span class="pc">diff: <span class="tp">double</span></span></a>) {
                    <span class="kw">val</span> <a class="pp">iu<span class="pc">iu: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">acc<span class="pc">acc: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#fst">fst<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fst: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">diff<span class="pc">diff: <span class="tp">double</span></span></a><a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="number">60.0</span>
                    <span class="kw">val</span> <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a> <span class="kw">=</span> <a class="pp" href="std_time_utc-source.html#unix_instant">unix-instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>utc<span class="fslash last">/</span></span>unix<span class="dash">-</span>instant: <span class="tp sp">(</span><span class="tp tpp">u</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">iu<span class="pc">iu: <span class="tp">double</span></span></a>)
                    <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">iu<span class="pc">iu: <span class="tp">double</span></span></a>,<a class="pp" href="std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>),<a class="pp">acc<span class="pc">acc: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span><span class="tp sp">)</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#snd">snd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>snd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">b</span></span></a>)<a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>
                  })<span class="kw op">.</span><a class="pp" href="std_core-source.html#snd">snd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>snd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">b</span></span></a>
    <span class="kw">val</span> <a class="pp">ofsabrs<span class="pc">ofsabrs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>  <span class="kw">=</span> <a class="pp">indices<span class="pc">indices: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">int</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#reverse">reverse<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>reverse: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>( <span class="kw">fun</span>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>) { <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">offsets<span class="pc">offsets: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<span class="number">0.0</span>), <a class="pp">abbrs<span class="pc">abbrs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<span class="st">""</span>) <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> } )
    <span class="kw">val</span> <a class="pp">periods<span class="pc">periods: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a>  <span class="kw">=</span> <a class="pp" href="std_core-source.html#zipwith">zipwith<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zipwith: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">ys</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">c</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">endings<span class="pc">endings: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_core-source.html#_plus__4">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.4</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">ys</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_core-source.html#con_space_Cons"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>, <a class="pp">ofsabrs<span class="pc">ofsabrs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a>, <span class="kw">fun</span>(<a class="pp">start<span class="pc">start: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">ofsabbr<span class="pc">ofsabbr: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span></span></a>) {
                     <a class="pp" href="#con_space_Timezone_period"><span class="co">Timezone-period</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>Timezone<span class="dash">-</span>period: <span class="tp sp">(</span><span class="tp tpp">start</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">abbrv</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">offset</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone<span class="dash">-</span>period</span></span></a>(<a class="pp">start<span class="pc">start: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">ofsabbr<span class="pc">ofsabbr: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#snd">snd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>snd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">b</span></span></a>, <a class="pp" href="std_time_duration-source.html#duration_2">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>(<a class="pp">ofsabbr<span class="pc">ofsabbr: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#fst">fst<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>fst: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_tilde__1">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="number">60.0</span>))
                   })
    <a class="pp">periods<span class="pc">periods: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>period</span><span class="tp sp">&gt;</span></span></a>
  }
  <span class="kw">fun</span>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a>) {
    <a class="pp" href="std_core-source.html#trace">trace<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>trace: <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<span class="st">"invalid timezone database entry for "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#show_4">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">":\n "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">exn</span> <span class="tp kw op">:</span> <span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)
    <a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
  }
</span>}

<span class="decl-fun" id="parse_fixed_base60"><span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#parse_fixed_base60">parse-fixed-base60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>fixed<span class="dash">-</span>base60: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">double</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">match</span>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#find">find<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>find: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">matched</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#rxfixbase60">rxfixbase60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxfixbase60: <span class="tp">regex</span></span></a>)) {
    <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="std_core-source.html#error">error<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>(<span class="st">"invalid fixed base60 number: "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>)
    <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a>) <span class="kw op">-></span> {
      <span class="kw">val</span> <a class="pp">sign<span class="pc">sign: <span class="tp">int</span></span></a> <span class="kw">=</span> <span class="kw">if</span> (<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_core-source.html#con_space_True"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="number">1</span>]<a class="pp" href="std_core-source.html#_eq__eq__3">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="st">"-"</span>) <span class="kw">then</span> <a class="pp" href="std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">1</span> <span class="kw">else</span> <span class="number">1</span>
      <span class="kw">val</span> <a class="pp">num<span class="pc">num: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp" href="#parse_base60">parse-base60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>base60: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">int</span></span></a>(<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">2</span>])
      <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">3</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#list_4">list<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#foldr">foldr<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>foldr: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">z</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span></span></a>(<span class="number">0.0</span>, <span class="kw">fun</span>(<a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a>,<a class="pp">n<span class="pc">n: <span class="tp">double</span></span></a>) {
                    (<a class="pp">n<span class="pc">n: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a><span class="kw op">.</span><a class="pp" href="#digit60">digit60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>digit60: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">60.0</span>
                 })
      (<a class="pp">sign<span class="pc">sign: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">num<span class="pc">num: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">frac<span class="pc">frac: <span class="tp">double</span></span></a>
    }
  }
</span>}
<span class="decl-val" id="rxfixbase60"><span class="kw">val</span> <a class="pp" href="std_time_timezone.html#rxfixbase60">rxfixbase60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxfixbase60: <span class="tp">regex</span></span></a> <span class="kw">=</span> <a class="pp" href="std_text_regex-source.html#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<span class="st">"^([\\-\\+])?([\\da-zA-X]&#42;)(?:\\.([\\da-zA-X]+))?$"</span></span>)

<span class="decl-fun" id="parse_base60"><span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#parse_base60">parse-base60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>base60: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">int</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">s</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#empty_ques__1">empty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>empty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#con_space__lp__rp_"><span class="co">0</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a>
  <span class="kw">match</span>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#find">find<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>find: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">matched</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#rxbase60">rxbase60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxbase60: <span class="tp">regex</span></span></a>)) {
    <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="std_core-source.html#error">error<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>(<span class="st">"invalid base60 number: "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>)
    <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a>) <span class="kw op">-></span> {
      <span class="kw">val</span> <a class="pp">sign<span class="pc">sign: <span class="tp">int</span></span></a> <span class="kw">=</span> <span class="kw">if</span> (<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_core-source.html#con_space_True"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="number">1</span>]<a class="pp" href="std_core-source.html#_eq__eq__3">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="st">"-"</span>) <span class="kw">then</span> <a class="pp" href="std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">1</span> <span class="kw">else</span> <span class="number">1</span>
      <span class="kw">val</span> <a class="pp">num<span class="pc">num: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">2</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#list_4">list<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">char</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#foldl">foldl<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>foldl: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp sp">(</span><span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span></span></a>(<span class="number">0</span>, <span class="kw">fun</span>(<a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a>,<a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a>) {
                    <a class="pp">n<span class="pc">n: <span class="tp">int</span></span></a><a class="pp" href="std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">60</span> <a class="pp" href="std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a><span class="kw op">.</span><a class="pp" href="#digit60">digit60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>digit60: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">int</span></span></a>
                  })
      <a class="pp">sign<span class="pc">sign: <span class="tp">int</span></span></a><a class="pp" href="std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">num<span class="pc">num: <span class="tp">int</span></span></a>
    }
  }
</span>}
<span class="decl-val" id="rxbase60"><span class="kw">val</span> <a class="pp" href="std_time_timezone.html#rxbase60">rxbase60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxbase60: <span class="tp">regex</span></span></a> <span class="kw">=</span> <a class="pp" href="std_text_regex-source.html#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<span class="st">"^([\\-\\+])?([\\da-zA-X]+)$"</span></span>)

<span class="decl-fun" id="digit60"><span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#digit60">digit60<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>digit60: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">int</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">d</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#digit_ques_">digit?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>digit?: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> (<a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a> <a class="pp" href="std_core-source.html#_dash__3">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">char</span></span></a> <span class="st">'0'</span>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">d</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#lower_ques_">lower?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>lower?: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> (<a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a> <a class="pp" href="std_core-source.html#_dash__3">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">char</span></span></a> <span class="st">'a'</span>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">10</span>
  <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">d</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#upper_ques_">upper?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>upper?: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> (<a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a> <a class="pp" href="std_core-source.html#_dash__3">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">,</span> <span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">char</span></span></a> <span class="st">'A'</span>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">36</span>
  <span class="kw">else</span> <a class="pp" href="std_core-source.html#error">error<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>error: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">message</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp tv">a</span></span></a>(<span class="st">"invalid digit in base 60: "</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">char</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#show_3">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">c</span> <span class="tp kw op">:</span> <span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)
</span>}


<span class="comment">/&#42;----------------------------------------------------------------------------
  Global timezone info
----------------------------------------------------------------------------&#42;/</span>

<span class="comment">// The abstract &#96;:timezones&#96; represents time zone information.
</span><span class="decl-type" id="type_space_timezones"><span class="kw">abstract</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Timezones"><a class="pp" href="std_time_timezone.html#type_space_timezones"><span class="tp">timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones: <span class="tp">V</span></span></a>( <span class="decl-fun" id="tzones"><a class="pp">tzones<span class="pc">tzones: <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a></span> <span class="tp kw op">:</span> <a class="pp" href="std_data_dict-source.html#type_space_dict"><span class="tp">dict</span><span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>dict: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_timezone_info"><span class="tp">timezone-info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> </span></span>)

<span class="comment">// Create time zone information from a list of &#96;:timezone-info&#96;.
</span><span class="decl-fun" id="timezones_1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#timezones_1">timezones<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">zones</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezones</span></span></a>( <a class="pp">zones<span class="pc">zones: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_timezone_info"><span class="tp">timezone-info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) {
  <a class="pp" href="#con_space_Timezones"><span class="co">Timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>Timezones: <span class="tp sp">(</span><span class="tp tpp">tzones</span> <span class="tp kw op">:</span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezones</span></span></a>( <a class="pp">zones<span class="pc">zones: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<span class="kw">fun</span>(<a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a>) { <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>name: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#normalize">normalize<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>normalize: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>, <a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> })<span class="kw op">.</span><a class="pp" href="std_data_dict-source.html#dict_1">dict<span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>dict<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">elems</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> )
</span>}

<span class="comment">// Empty &#96;:timezones&#96;.
</span><span class="decl-val" id="timezones_empty"><span class="kw">public</span> <span class="kw">val</span> <a class="pp" href="std_time_timezone.html#timezones_empty">timezones-empty<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones<span class="dash">-</span>empty: <span class="tp">timezones</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Timezones"><span class="co">Timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>Timezones: <span class="tp sp">(</span><span class="tp tpp">tzones</span> <span class="tp kw op">:</span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezones</span></span></a>(<a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">[</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">]</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_data_dict-source.html#dict_1">dict<span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>dict<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">elems</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a></span>)

<span class="comment">// Load time zone information from a [packed json](http://momentjs.com/timezone/docs/#/data-formats/packed-format)
// file. Looks by default for the file &#96;"config/timezones.json"&#96; in the application directory
// but an optional file name can be supplied.
// The latest version can be found at: &lt;https://github.com/moment/moment-timezone/blob/develop/data/packed/latest.json&gt;.
</span><span class="decl-fun" id="load_timezones_from"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#load_timezones_from">load-timezones-from<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>load<span class="dash">-</span>timezones<span class="dash">-</span>from: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp">timezones</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp op">?</span><span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="st">""</span> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_io"><span class="tp"><span class="effect">io</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>io: <span class="tp">E</span></span></a> <a class="pp" href="#type_space_timezones"><span class="tp">timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">fpath<span class="pc">fpath: <span class="tp">path</span></span></a> <span class="kw">=</span> <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">fname</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#empty_ques__1">empty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>empty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="std_os_path-source.html#appdir">appdir<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>appdir: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp">path</span></span></a>() <a class="pp" href="std_os_path-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">p1</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">p2</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">path</span></span></a> <a class="pp" href="std_os_path-source.html#path">path<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">path</span></span></a>(<span class="st">"config/timezones.json"</span>) <span class="kw">else</span> <a class="pp">fname<span class="pc">fname: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#path">path<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">path</span></span></a>
  <a class="pp" href="#parse_packed_zones">parse-packed-zones<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>parse<span class="dash">-</span>packed<span class="dash">-</span>zones: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">exn</span> <span class="tp">timezones</span></span></a>(<a class="pp" href="std_os_file-source.html#read_text_file_sync">read-text-file-sync<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>read<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>sync: <span class="tp sp">(</span><span class="tp tpp">fileName</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp">string</span></span></a>(<a class="pp">fpath<span class="pc">fpath: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>))
</span>}

<span class="decl-fun" id="normalize"><span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#normalize">normalize<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>normalize: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp">name<span class="pc">name: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#to_lower">to-lower<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>to<span class="dash">-</span>lower: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#replace_all_1">replace-all<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>replace<span class="dash">-</span>all<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">,</span> <span class="tp tpp">repl</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp" href="#rxsep">rxsep<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxsep: <span class="tp">regex</span></span></a>,<span class="st">""</span>)
</span>}
<span class="decl-val" id="rxsep"><span class="kw">val</span> <a class="pp" href="std_time_timezone.html#rxsep">rxsep<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>rxsep: <span class="tp">regex</span></span></a> <span class="kw">=</span> <a class="pp" href="std_text_regex-source.html#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<span class="st">"[\\/\\\\\\s\\-&#95;]+"</span></span>)

<span class="comment">// Return all available IANA time zone identifiers.
</span><span class="decl-fun" id="timezone_names"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#timezone_names">timezone-names<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>names: <span class="tp sp">(</span><span class="tp tpp">tzs</span> <span class="tp kw op">:</span> <span class="tp">timezones</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">tzs<span class="pc">tzs: <span class="tp">timezones</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timezones"><span class="tp">timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp">tzs<span class="pc">tzs: <span class="tp">timezones</span></span></a><span class="kw op">.</span><a class="pp" href="#tzones">tzones<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>tzones: <span class="tp sp">(</span><span class="tp tpp">timezones</span> <span class="tp kw op">:</span> <span class="tp">timezones</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_data_dict-source.html#list_1">list<span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>list<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<span class="kw">fun</span>(<a class="pp">kv<span class="pc">kv: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span></span></a>) { <a class="pp">kv<span class="pc">kv: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#snd">snd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>snd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">b</span></span></a><span class="kw op">.</span><a class="pp" href="#name">name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>name: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> })
</span>}

<span class="comment">// Return a &#96;:timezone-info&#96; for a IANA time zone identifier (if it exists)
</span><span class="decl-fun" id="timezone_info"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#timezone_info">timezone-info<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp sp">(</span><span class="tp tpp">tzs</span> <span class="tp kw op">:</span> <span class="tp">timezones</span><span class="tp sp">,</span> <span class="tp tpp">tz<span class="dash">-</span>name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">tzs<span class="pc">tzs: <span class="tp">timezones</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timezones"><span class="tp">timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones: <span class="tp">V</span></span></a>, <a class="pp">tz-name<span class="pc">tz<span class="dash">-</span>name: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>  ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_timezone_info"><span class="tp">timezone-info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <span class="comment">//val tzs = unsafe-total(get-timezones)
</span>  <a class="pp">tzs<span class="pc">tzs: <span class="tp">timezones</span></span></a><span class="kw op">.</span><a class="pp" href="#tzones">tzones<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>tzones: <span class="tp sp">(</span><span class="tp tpp">timezones</span> <span class="tp kw op">:</span> <span class="tp">timezones</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a><a class="pp" href="std_data_dict-source.html#_lb__rb__2">[<span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>[]<span class="postfix">.2</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">key</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a><a class="pp">tz-name<span class="pc">tz<span class="dash">-</span>name: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#normalize">normalize<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>normalize: <span class="tp sp">(</span><span class="tp tpp">name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>]
</span>}

<span class="comment">// Return a &#96;:timezone&#96; given a IANA time zone identifier, for example &#96;tzs.timezone("US/Pacific")&#96;
// &#96;tzs.timezone("Asia/Singapore")&#96;. Return &#96;default&#96; (= &#96;tz-utc&#96;) if the time zone is not found.
</span><span class="decl-fun" id="timezone_1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#timezone_1">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">tzs</span> <span class="tp kw op">:</span> <span class="tp">timezones</span><span class="tp sp">,</span> <span class="tp tpp">tz<span class="dash">-</span>name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">def</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>( <a class="pp">tzs<span class="pc">tzs: <span class="tp">timezones</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timezones"><span class="tp">timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones: <span class="tp">V</span></span></a>, <a class="pp">tz-name<span class="pc">tz<span class="dash">-</span>name: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">def<span class="pc">def: <span class="tp op">?</span><span class="tp">timezone</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_time_calendar-source.html#tz_utc">tz-utc<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>utc: <span class="tp">timezone</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_time_calendar-source.html#type_space_timezone"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>timezone: <span class="tp">V</span></span></a> {
  <a class="pp">tzs<span class="pc">tzs: <span class="tp">timezones</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone_info">timezone-info<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp sp">(</span><span class="tp tpp">tzs</span> <span class="tp kw op">:</span> <span class="tp">timezones</span><span class="tp sp">,</span> <span class="tp tpp">tz<span class="dash">-</span>name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">tz-name<span class="pc">tz<span class="dash">-</span>name: <span class="tp">string</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#map">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">tzi</span> <span class="tp kw op">:</span> <span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#default">default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>default: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">nothing</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<a class="pp">def<span class="pc">def: <span class="tp">timezone</span></span></a>)
</span>}


<span class="comment">/&#42;----------------------------------------------------------------------------
   Guess the local time zone
----------------------------------------------------------------------------&#42;/</span>

<span class="decl-fun" id="sample_dates"><span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#sample_dates">sample-dates<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>sample<span class="dash">-</span>dates: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">year<span class="pc">year: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp" href="std_core-source.html#list">list<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp sp">(</span><span class="tp tpp">lo</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hi</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">int</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">year<span class="pc">year: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">1</span>, <a class="pp">year<span class="pc">year: <span class="tp">int</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#flatmap">flatmap<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>flatmap: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>( <span class="kw">fun</span>(<a class="pp">y<span class="pc">y: <span class="tp">int</span></span></a>) {
    <a class="pp" href="std_core-source.html#list">list<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp sp">(</span><span class="tp tpp">lo</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hi</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">int</span><span class="tp sp">&gt;</span></span></a>(<span class="number">0</span>,<span class="number">3</span>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>( <span class="kw">fun</span>(<a class="pp">m<span class="pc">m: <span class="tp">int</span></span></a>) { <a class="pp" href="std_time_utc-source.html#ts_ti">ts-ti<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>utc<span class="fslash last">/</span></span>ts<span class="dash">-</span>ti: <span class="tp">timescale</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_calendar-source.html#instant_2">instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>instant<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">month</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">day</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hours</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">minutes</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">seconds</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>(<a class="pp">y<span class="pc">y: <span class="tp">int</span></span></a>,<a class="pp">m<span class="pc">m: <span class="tp">int</span></span></a><a class="pp" href="std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">4</span>,<span class="number">15</span>) } )
  })
</span>}

<span class="decl-fun" id="sample_offsets"><span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#sample_offsets">sample-offsets<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>sample<span class="dash">-</span>offsets: <span class="tp sp">(</span><span class="tp tpp">dates</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp">timezone</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">dates<span class="pc">dates: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_calendar-source.html#type_space_timezone"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>timezone: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <a class="pp">dates<span class="pc">dates: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>( <span class="kw">fun</span>(<a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a>) {
    <a class="pp">i<span class="pc">i: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="std_time_time-source.html#time">time<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">,</span> <span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timescale</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">time</span></span></a>(tz<span class="kw">=</span><a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_time_time-source.html#tzdelta">tzdelta<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>tzdelta: <span class="tp sp">(</span><span class="tp tpp">time</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>
  })
</span>}

<span class="decl-fun" id="match_offsets"><span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#match_offsets">match-offsets<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>match<span class="dash">-</span>offsets: <span class="tp sp">(</span><span class="tp tpp">dates</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">offsets</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp">timezone</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">dates<span class="pc">dates: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <a class="pp">offsets<span class="pc">offsets: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_time_duration-source.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_time_calendar-source.html#type_space_timezone"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>timezone: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">offsets2<span class="pc">offsets2: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">dates<span class="pc">dates: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="#sample_offsets">sample-offsets<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>sample<span class="dash">-</span>offsets: <span class="tp sp">(</span><span class="tp tpp">dates</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp">timezone</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>)
  <a class="pp" href="std_core-source.html#zipwith">zipwith<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zipwith: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">c</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">ys</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">c</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">c</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">offsets<span class="pc">offsets: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">offsets2<span class="pc">offsets2: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span></span></a>,<span class="kw">fun</span>(<a class="pp">x<span class="pc">x: <span class="tp">duration</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">duration</span></span></a>) { <a class="pp">x<span class="pc">x: <span class="tp">duration</span></span></a> <a class="pp" href="std_time_duration-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">duration</span></span></a> })<span class="kw op">.</span><a class="pp" href="std_core-source.html#all">all<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>all: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">predicate</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">bool</span></span></a>(<a class="pp" href="std_core-source.html#id">id<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>id: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>)
</span>}

<span class="comment">// Guess the local timezone. Not as reliable as &#96;tz-local&#96; but will contain
// more information on certain platforms (i.e. the timezone abbreviation).
// Returns &#96;tz-local()&#96; if no match can be found (or a user supplied &#96;default&#96;).
</span><span class="decl-fun" id="guess_local_timezone"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_time_timezone.html#guess_local_timezone">guess-local-timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>guess<span class="dash">-</span>local<span class="dash">-</span>timezone: <span class="tp sp">(</span><span class="tp tpp">tzs</span> <span class="tp kw op">:</span> <span class="tp">timezones</span><span class="tp sp">,</span> <span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">timezone</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">timezone</span></span></a>( <a class="pp">tzs<span class="pc">tzs: <span class="tp">timezones</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_timezones"><span class="tp">timezones</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezones: <span class="tp">V</span></span></a>, <a class="pp">default<span class="pc">default: <span class="tp op">?</span><span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">timezone</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_time_calendar-source.html#type_space_timezone"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>timezone: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> <span class="kw">=</span> <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a> <a class="pp" href="std_time_calendar-source.html#type_space_timezone"><span class="tp">timezone</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>timezone: <span class="tp">V</span></span></a> {
  <span class="kw">match</span>(<a class="pp">tzs<span class="pc">tzs: <span class="tp">timezones</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone_info">timezone-info<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone<span class="dash">-</span>info: <span class="tp sp">(</span><span class="tp tpp">tzs</span> <span class="tp kw op">:</span> <span class="tp">timezones</span><span class="tp sp">,</span> <span class="tp tpp">tz<span class="dash">-</span>name</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#local_timezone_name">local-timezone-name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>local<span class="dash">-</span>timezone<span class="dash">-</span>name: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">string</span></span></a>())) {
    <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a>) <span class="kw op">-></span> <a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">tzi</span> <span class="tp kw op">:</span> <span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>
    <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> {
      <span class="kw">val</span> <a class="pp">year<span class="pc">year: <span class="tp">int</span></span></a>    <span class="kw">=</span> <a class="pp" href="std_time_time-source.html#time_now">time-now<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>time<span class="dash">-</span>now: <span class="tp sp">(</span><span class="tp tpp">ts</span> <span class="tp kw op">:</span> <span class="tp">timescale</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">timezone</span><span class="tp sp">,</span> <span class="tp tpp">cal</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">calendar</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">time</span></span></a>(<a class="pp" href="std_time_utc-source.html#ts_ti">ts-ti<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>utc<span class="fslash last">/</span></span>ts<span class="dash">-</span>ti: <span class="tp">timescale</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_time_time-source.html#year">year<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>time<span class="fslash last">/</span></span>year: <span class="tp sp">(</span><span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">time</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
      <span class="kw">val</span> <a class="pp">dates<span class="pc">dates: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a>   <span class="kw">=</span> <a class="pp" href="#sample_dates">sample-dates<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>sample<span class="dash">-</span>dates: <span class="tp sp">(</span><span class="tp tpp">year</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">year<span class="pc">year: <span class="tp">int</span></span></a>)
      <span class="kw">val</span> <a class="pp">offsets<span class="pc">offsets: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">dates<span class="pc">dates: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="#sample_offsets">sample-offsets<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>sample<span class="dash">-</span>offsets: <span class="tp sp">(</span><span class="tp tpp">dates</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp">timezone</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="std_time_calendar-source.html#tz_local">tz-local<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>local: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">timezone</span></span></a>())
      <span class="kw">val</span> <a class="pp">matches<span class="pc">matches: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp">tzs<span class="pc">tzs: <span class="tp">timezones</span></span></a><span class="kw op">.</span><a class="pp" href="#tzones">tzones<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>tzones: <span class="tp sp">(</span><span class="tp tpp">timezones</span> <span class="tp kw op">:</span> <span class="tp">timezones</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_data_dict-source.html#list_1">list<span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>dict<span class="fslash last">/</span></span>list<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">dict</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="std_core-source.html#snd">snd<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>snd: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">b</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#filter">filter<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>filter: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">pred</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>( <span class="kw">fun</span>(<a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a>){
        (<a class="pp" href="std_core-source.html#_excl_">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#aliased">aliased<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>aliased: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>  <a class="pp">dates<span class="pc">dates: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="#match_offsets">match-offsets<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>match<span class="dash">-</span>offsets: <span class="tp sp">(</span><span class="tp tpp">dates</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">instant</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">offsets</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">tz</span> <span class="tp kw op">:</span> <span class="tp">timezone</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">offsets<span class="pc">offsets: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">duration</span><span class="tp sp">&gt;</span></span></a>,<a class="pp">tzi<span class="pc">tzi: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">tzi</span> <span class="tp kw op">:</span> <span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>))
      })
      <span class="comment">// trace("timezone guess matches: " + matches.show-list(fun(tzi){ tzi.show }))
</span>      <span class="kw">match</span>(<a class="pp">matches<span class="pc">matches: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a>) {
        <a class="pp" href="std_core-source.html#con_space_Nil"><span class="co">Nil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nil: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <span class="kw">match</span>(<a class="pp">default<span class="pc">default: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">timezone</span><span class="tp sp">&gt;</span></span></a>) {
          <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>  <span class="kw op">-></span> <a class="pp" href="std_time_calendar-source.html#tz_local">tz-local<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>calendar<span class="fslash last">/</span></span>tz<span class="dash">-</span>local: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">timezone</span></span></a>()
          <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>) <span class="kw op">-></span> <a class="pp">tz<span class="pc">tz: <span class="tp">timezone</span></span></a>
        }
        <a class="pp" href="std_core-source.html#con_space_Cons"><span class="co">Cons</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Cons: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">head</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">tail</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">tz1<span class="pc">tz1: <span class="tp">timezone<span class="dash">-</span>info</span></span></a>,<a class="pp">rest<span class="pc">rest: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a>) <span class="kw op">-></span> {
          <span class="kw">val</span> <a class="pp">pick<span class="pc">pick: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;4937</span><span class="tp sp">,</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#ref">ref<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ref: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">alloc</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">tz1<span class="pc">tz1: <span class="tp">timezone<span class="dash">-</span>info</span></span></a>)
          <a class="pp">rest<span class="pc">rest: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#foreach">foreach<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>foreach: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="kw">fun</span>(<a class="pp">tz<span class="pc">tz: <span class="tp">timezone<span class="dash">-</span>info</span></span></a>) {
            <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">tz</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#population">population<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>population: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_eq__eq__1">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0</span> <a class="pp" href="std_core-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> (<a class="pp">tz<span class="pc">tz: <span class="tp">timezone<span class="dash">-</span>info</span></span></a><span class="kw op">.</span><a class="pp" href="#population">population<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>population: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_gt__1">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> (<a class="pp" href="std_core-source.html#_excl__1">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!)<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> <span class="tp kw">with</span> <span class="tp">hdiv</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span></span></a><a class="pp">pick<span class="pc">pick: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;4937</span><span class="tp sp">,</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a>)<span class="kw op">.</span><a class="pp" href="#population">population<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>population: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> (<a class="pp" href="std_core-source.html#_excl__1">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!)<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> <span class="tp kw">with</span> <span class="tp">hdiv</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span></span></a><a class="pp">pick<span class="pc">pick: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;4937</span><span class="tp sp">,</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a>)<span class="kw op">.</span><a class="pp" href="#population">population<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>population: <span class="tp sp">(</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_gt__1">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0</span>)) {
              <a class="pp">pick<span class="pc">pick: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;4937</span><span class="tp sp">,</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_core-source.html#set"><span class="kw">:=</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>set: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">write</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <a class="pp">tz<span class="pc">tz: <span class="tp">timezone<span class="dash">-</span>info</span></span></a>
            <a class="pp" href="std_core-source.html#con_space__lp__rp_"><span class="co">}</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a>
          }
          (<a class="pp" href="std_core-source.html#_excl__1">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!)<span class="postfix">.1</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> <span class="tp kw">with</span> <span class="tp">hdiv</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span></span></a><a class="pp">pick<span class="pc">pick: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;4937</span><span class="tp sp">,</span><span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">&gt;</span></span></a>)<span class="kw op">.</span><a class="pp" href="#timezone">timezone<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>timezone: <span class="tp sp">(</span><span class="tp tpp">tzi</span> <span class="tp kw op">:</span> <span class="tp">timezone<span class="dash">-</span>info</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timezone</span></span></a>
        }
      }
    }
  }
</span>}

<span class="decl-fun" id="local_timezone_name"><span class="kw">extern</span> <a class="pp" href="std_time_timezone.html#local_timezone_name">local-timezone-name<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>timezone<span class="fslash last">/</span></span>local<span class="dash">-</span>timezone<span class="dash">-</span>name: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">ndet</span> <span class="tp">string</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  cs inline <span class="st">"TimeZoneInfo.Local.DisplayName"</span>
  js <span class="st">"&#95;local&#95;timezone&#95;name"</span>
</span>}
</pre>

</div></body>
</html>
