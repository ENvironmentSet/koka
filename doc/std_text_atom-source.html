<!DOCTYPE html>
<html>
<!-- NO_CLICK_TRACKING -->

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>atom.kk documentation</title>
</head>

<body class="koka doc body"><div class="madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2012 Microsoft Corporation.

  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the file "license.txt" at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Perfect hashing for strings.

   These &#96;:atom&#96;s can be compared very efficiently. If you compare only
   seldomly, a straight string compare will probably be faster since
   creating an atom takes some initial work.
&#42;/</span>
<span class="kw">module</span> atom

<span class="kw">import</span> int32

<span class="kw">external</span> include {
  cs file <span class="st">"atom-inline.cs"</span>
  js file <span class="st">"atom-inline.js"</span>
}

<span class="comment">// An &#96;atom&#96; corresponding to the empty string
</span><span class="decl-val" id="atom_null"><span class="kw">public</span> <span class="kw">val</span> <a class="pp" href="std_text_atom.html#atom_null">atom-null<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom<span class="dash">-</span>null: <span class="tp">atom</span></span></a> <span class="kw">=</span> <a class="pp" href="#atom">atom<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">atom</span></span></a>(<span class="st">""</span></span>)

<span class="comment">// An atom is an abstract representation of a string that can be compared quickly
</span><span class="decl-type" id="type_space_atom"><span class="kw">abstract</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Atom"><a class="pp" href="std_text_atom.html#type_space_atom"><span class="tp">atom</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom: <span class="tp">V</span></span></a>( <span class="decl-fun" id="value"><a class="pp">value<span class="pc">value: <span class="tp">int32</span></span></a></span><span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int32"><span class="tp">int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int32: <span class="tp">V</span></span></a> </span></span>)

<span class="comment">// Create an &#96;:atom&#96;
</span><span class="decl-fun" id="atom_create"><span class="kw">extern</span> <a class="pp" href="std_text_atom.html#atom_create">atom-create<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom<span class="dash">-</span>create: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_int32"><span class="tp">int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int32: <span class="tp">V</span></span></a> {
  cs <span class="st">"Atom.Create"</span>
  js <span class="st">"$atomCreate"</span>
</span>}

<span class="comment">// Convert an &#96;:atom&#96; back to a &#96;:string&#96;
</span><span class="decl-fun" id="atom_to_string"><span class="kw">extern</span> <a class="pp" href="std_text_atom.html#atom_to_string">atom-to-string<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom<span class="dash">-</span>to<span class="dash">-</span>string: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int32</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span> <span class="tp tpp">x</span> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int32"><span class="tp">int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int32: <span class="tp">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  cs <span class="st">"Atom.ToString"</span>
  js <span class="st">"$atomToString"</span>
</span>}

<span class="comment">// Create an &#96;:atom&#96;
</span><span class="decl-fun" id="atom"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_text_atom.html#atom">atom<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">atom</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_atom"><span class="tp">atom</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom: <span class="tp">V</span></span></a> {
  <a class="pp" href="#atom_create">atom-create<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom<span class="dash">-</span>create: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>)<span class="kw op">.</span><a class="pp" href="#con_space_Atom"><span class="co">Atom</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>Atom: <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp">int32</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">atom</span></span></a>
</span>}

<span class="comment">// Convert an &#96;:atom&#96; back to a &#96;:string&#96;
</span><span class="decl-fun" id="string"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_text_atom.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">a</span> <span class="tp kw op">:</span> <span class="tp">atom</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">a<span class="pc">a: <span class="tp">atom</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_atom"><span class="tp">atom</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp" href="#atom_to_string">atom-to-string<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom<span class="dash">-</span>to<span class="dash">-</span>string: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int32</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">a<span class="pc">a: <span class="tp">atom</span></span></a><span class="kw op">.</span><a class="pp" href="#value">value<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>value: <span class="tp sp">(</span><span class="tp tpp">atom</span> <span class="tp kw op">:</span> <span class="tp">atom</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a>)
</span>}

<span class="comment">// Compare two atoms for equality
</span><span class="decl-fun" id="_eq__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_text_atom.html#_eq__eq_">(==)<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">atom</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">atom</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">atom</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_atom"><span class="tp">atom</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">atom</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_atom"><span class="tp">atom</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  (<a class="pp">x<span class="pc">x: <span class="tp">atom</span></span></a><span class="kw op">.</span><a class="pp" href="#value">value<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>value: <span class="tp sp">(</span><span class="tp tpp">atom</span> <span class="tp kw op">:</span> <span class="tp">atom</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a> <a class="pp" href="std_num_int32-source.html#_eq__eq_">==<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>int32<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp">int32</span><span class="tp sp">,</span> <span class="tp">int32</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">atom</span></span></a><span class="kw op">.</span><a class="pp" href="#value">value<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>value: <span class="tp sp">(</span><span class="tp tpp">atom</span> <span class="tp kw op">:</span> <span class="tp">atom</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a>)
</span>}

<span class="comment">// Compare if two atoms are not equal.
</span><span class="decl-fun" id="_excl__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_text_atom.html#_excl__eq_">(!=)<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>(!=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">atom</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">atom</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">atom</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_atom"><span class="tp">atom</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">atom</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_atom"><span class="tp">atom</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  (<a class="pp">x<span class="pc">x: <span class="tp">atom</span></span></a><span class="kw op">.</span><a class="pp" href="#value">value<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>value: <span class="tp sp">(</span><span class="tp tpp">atom</span> <span class="tp kw op">:</span> <span class="tp">atom</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a> <a class="pp" href="std_num_int32-source.html#_excl__eq_">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>int32<span class="fslash last">/</span></span>(!=): <span class="tp sp">(</span><span class="tp">int32</span><span class="tp sp">,</span> <span class="tp">int32</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">atom</span></span></a><span class="kw op">.</span><a class="pp" href="#value">value<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>value: <span class="tp sp">(</span><span class="tp tpp">atom</span> <span class="tp kw op">:</span> <span class="tp">atom</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a>)
</span>}


<span class="decl-fun" id="atom_matcher"><span class="kw">extern</span> <a class="pp" href="std_text_atom.html#atom_matcher">atom-matcher<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom<span class="dash">-</span>matcher: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">ignoreCase</span> <span class="tp kw op">:</span> <span class="tp">int32</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">any</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span> <span class="tp tpp">xs</span> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_vector"><span class="tp">vector</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>vector: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">ignoreCase</span><span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int32"><span class="tp">int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int32: <span class="tp">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_any"><span class="tp">any</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>any: <span class="tp">V</span></span></a>
{
  cs <span class="st">"Atom.CreateMatcher"</span>
  js <span class="st">"$atomCreateMatcher"</span>
</span>}

<span class="decl-fun" id="atom_match"><span class="kw">extern</span> <a class="pp" href="std_text_atom.html#atom_match">atom-match<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom<span class="dash">-</span>match: <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">any</span><span class="tp sp">,</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignoreCase</span> <span class="tp kw op">:</span> <span class="tp">int32</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span> <span class="tp tpp">m</span> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_any"><span class="tp">any</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>any: <span class="tp">V</span></span></a><span class="tp sp">,</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a><span class="tp sp">,</span> <span class="tp tpp">ignoreCase</span><span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int32"><span class="tp">int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int32: <span class="tp">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_int32"><span class="tp">int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int32: <span class="tp">V</span></span></a>
{
  cs <span class="st">"Atom.Match"</span>
  js <span class="st">"$atomMatch"</span>
</span>}

<span class="comment">// Create an efficient string matcher which given a list of strings returns a matching function.
</span><span class="decl-fun" id="matcher"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_text_atom.html#matcher">matcher<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>matcher: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">ignoreCase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span></span></a>( <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <a class="pp">ignoreCase<span class="pc">ignoreCase: <span class="tp op">?</span><span class="tp">bool</span></span></a><span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a> ) <span class="tp kw op">:</span> <span class="tp sp">(</span><a class="pp" href="std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">(</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a><span class="tp sp">)</span>
{
  <a class="pp" href="#matcher_1">matcher<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>matcher<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">ignoreCase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span></span></a>(<a class="pp" href="std_core-source.html#vector_3">vector<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>vector<span class="postfix">.3</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>), <a class="pp">ignoreCase<span class="pc">ignoreCase: <span class="tp">bool</span></span></a>)
</span>}

<span class="comment">// Create an efficient string matcher which given a vector of strings returns a matching function.
</span><span class="decl-fun" id="matcher_1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_text_atom.html#matcher_1">matcher<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>matcher<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">ignoreCase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span><span class="tp sp">)</span></span></a>( <a class="pp">xs<span class="pc">xs: <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_vector"><span class="tp">vector</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>vector: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, <a class="pp">ignoreCase<span class="pc">ignoreCase: <span class="tp op">?</span><span class="tp">bool</span></span></a><span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a> ) <span class="tp kw op">:</span> <span class="tp sp">(</span><a class="pp" href="std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">(</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a><span class="tp sp">)</span>
{
  <span class="kw">val</span> <a class="pp">m<span class="pc">m: <span class="tp">any</span></span></a> <span class="kw">=</span> <a class="pp" href="#atom_matcher">atom-matcher<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom<span class="dash">-</span>matcher: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">ignoreCase</span> <span class="tp kw op">:</span> <span class="tp">int32</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">any</span></span></a>( <a class="pp">xs<span class="pc">xs: <span class="tp">vector</span><span class="tp sp">&lt;</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>, <a class="pp">ignoreCase<span class="pc">ignoreCase: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_num_int32-source.html#int32_1">int32<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>int32<span class="fslash last">/</span></span>int32<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a> );
  <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="kw">fun</span>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>) { <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">bool</span></span></a> <a class="pp" href="std_num_int32-source.html#bool">bool<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>int32<span class="fslash last">/</span></span>bool: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int32</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp" href="#atom_match">atom-match<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>atom<span class="fslash last">/</span></span>atom<span class="dash">-</span>match: <span class="tp sp">(</span><span class="tp tpp">m</span> <span class="tp kw op">:</span> <span class="tp">any</span><span class="tp sp">,</span> <span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignoreCase</span> <span class="tp kw op">:</span> <span class="tp">int32</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a>(<a class="pp">m<span class="pc">m: <span class="tp">any</span></span></a>,<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>,<a class="pp">ignoreCase<span class="pc">ignoreCase: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_num_int32-source.html#int32_1">int32<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>int32<span class="fslash last">/</span></span>int32<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a>)); }
</span>}
</pre>

</div></body>
</html>
