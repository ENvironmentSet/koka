
<!DOCTYPE html>
<html>
<!-- NO_CLICK_TRACKING -->

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>std/text/string documentation</title>
</head>

<body class="koka doc body"><div class="madoko">
<h1><a class="link" href="std_text_string-source.html"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string</span></a><a class="link" href="toc.html"><span class="toc-link">&#x25b2;toc</span></a></h1>
<div class="toc code"><ul class="toc"><li><a class="link" href="#type_space_builder"><span class="kw">type</span>&nbsp;<span class="tp">builder</span></a>
</li><li class="nested"><a class="link" href="#append"><span class="kw">fun</span>&nbsp;append</a></li><li class="nested"><a class="link" href="#build"><span class="kw">fun</span>&nbsp;build</a></li><li class="nested"><a class="link" href="#builder"><span class="kw">fun</span>&nbsp;builder</a></li><li class="nested"><a class="link" href="#prepend"><span class="kw">fun</span>&nbsp;prepend</a></li><li>&nbsp;</li><li><a class="link" href="#indent"><span class="kw">fun</span>&nbsp;indent</a></li><li><a class="link" href="#jaro_distance"><span class="kw">fun</span>&nbsp;jaro<span class="dash">-</span>distance</a></li><li><a class="link" href="#jaro_winkler_distance"><span class="kw">fun</span>&nbsp;jaro<span class="dash">-</span>winkler<span class="dash">-</span>distance</a></li><li><a class="link" href="#with_builder"><span class="kw">fun</span>&nbsp;with<span class="dash">-</span>builder</a></li></ul></div>
<div class="doc koka comment">

<p class="p noindent"> Extended string operations and a string builder.
</p></div>
<div class="decl" id="type_space_builder"><div class="header code"><span class="def"><span class="kw">type</span>&nbsp;<span class="tp"><a class="pp" href="std_text_string-source.html#type_space_builder"><span class="tp">builder</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>builder: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a></span></span><span class="tp">&lt;<span class="tp tv">h</span>&gt;</span></div><div class="doc koka comment">

<p class="p noindent">   A <code class="koka"><a class="pp" href="#type_space_builder"><span class="tp">builder</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>builder: <span class="tp">H</span> <span class="tp kw op">-&gt;</span> <span class="tp">V</span></span></a></code> is used to append strings in linear time.
</p></div><div class="nested"><div class="decl" id="append"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_text_string-source.html#append">append</a></span>( <span class="tp tpp">b</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_builder"><span class="tp">builder</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>builder: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span>, <span class="tp tpp">s</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><a class="pp" href="std_core.html#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>write: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <a class="pp" href="#type_space_builder"><span class="tp">builder</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>builder: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p class="p noindent">   O(1). Append to a string builder.
</p></div></div><div class="decl" id="build"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_text_string-source.html#build">build</a></span>( <span class="tp tpp">b</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_builder"><span class="tp">builder</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>builder: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><a class="pp" href="std_core.html#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>read: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">   O(n). Read the current string from a string builder.
</p></div></div><div class="decl" id="builder"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_text_string-source.html#builder">builder</a></span>()<span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><a class="pp" href="std_core.html#type_space_alloc"><span class="tp">alloc</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>alloc: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <a class="pp" href="#type_space_builder"><span class="tp">builder</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>builder: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p class="p noindent">   Create a string builder.
</p></div></div><div class="decl" id="prepend"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_text_string-source.html#prepend">prepend</a></span>( <span class="tp tpp">b</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_builder"><span class="tp">builder</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>builder: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span>, <span class="tp tpp">s</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><a class="pp" href="std_core.html#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>write: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <a class="pp" href="#type_space_builder"><span class="tp">builder</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>builder: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p class="p noindent">   O(1). Prepend a string in front of a string builder.
</p></div></div></div></div>
<div class="decl" id="indent"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_text_string-source.html#indent">indent</a></span>( <span class="tp tpp">s</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <span class="tp tpp">n</span> <span class="tp sp">:</span>&nbsp;<span class="tp op">?</span><a class="pp" href="std_core.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <span class="tp tpp">fill</span> <span class="tp sp">:</span>&nbsp;<span class="tp op">?</span><a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">   Indent all lines a string <code class="koka">s</code> by <code class="koka">n</code>. <code class="koka">fill</code> is used for indentation, by default <code class="koka"><span class="st">&#34; &#34;</span></code>.
</p></div></div>
<div class="decl" id="jaro_distance"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_text_string-source.html#jaro_distance">jaro<span class="dash">-</span>distance</a></span>( <span class="tp tpp">s</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <span class="tp tpp">t</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">   Return the&nbsp;<a href="https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance">Jaro distance</a> 
   between two strings. This is a number between <code class="koka"><span class="number">1.0</span></code> and <code class="koka"><span class="number">0.0</span></code> where <code class="koka"><span class="number">1.0</span></code> is a perfect
   match. Works best for small words and names.
<br>
   <code class="koka"><a class="pp" href="#jaro_distance">jaro<span class="dash">-</span>distance<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>jaro<span class="dash">-</span>distance: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp">double</span></span></a>(<span class="st">&#34;martha&#34;</span>,<span class="st">&#34;marhta&#34;</span>) <span class="op">==</span> <span class="number">0.94</span></code><br>
   <code class="koka"><a class="pp" href="#jaro_distance">jaro<span class="dash">-</span>distance<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>jaro<span class="dash">-</span>distance: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp">double</span></span></a>(<span class="st">&#34;abrams&#34;</span>,<span class="st">&#34;abroms&#34;</span>) <span class="op">==</span> <span class="number">0.89</span></code>.
</p></div></div>
<div class="decl" id="jaro_winkler_distance"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_text_string-source.html#jaro_winkler_distance">jaro<span class="dash">-</span>winkler<span class="dash">-</span>distance</a></span>( <span class="tp tpp">s</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <span class="tp tpp">t</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <span class="tp tpp">boost<span class="dash">-</span>threshold</span> <span class="tp sp">:</span>&nbsp;<span class="tp op">?</span><a class="pp" href="std_core.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <span class="tp tpp">prefix<span class="dash">-</span>len</span> <span class="tp sp">:</span>&nbsp;<span class="tp op">?</span><a class="pp" href="std_core.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <span class="tp tpp">scale</span> <span class="tp sp">:</span>&nbsp;<span class="tp op">?</span><a class="pp" href="std_core.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">   Return the&nbsp;<a href="https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance">Jaro-Winkler distance</a> 
   between two strings. This is a number between <code class="koka"><span class="number">1.0</span></code> and <code class="koka"><span class="number">0.0</span></code> where <code class="koka"><span class="number">1.0</span></code> is a perfect
   match. . Works best for small words and names.
   <em class="em-low1">Jaro-Winkler</em> is a variation of a plain <code class="koka"><a class="pp" href="#jaro_distance">jaro<span class="dash">-</span>distance<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>jaro<span class="dash">-</span>distance: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp">double</span></span></a></code> developed by the U.S. census
   for name comparison and it gives a higher score to strings that have a common prefix.
<br>
   <em class="em-star1"> Scores are only boosted if the <code class="koka"><a class="pp" href="#jaro_distance">jaro<span class="dash">-</span>distance<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>jaro<span class="dash">-</span>distance: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp">double</span></span></a></code> is above the <code class="koka">boost<span class="dash">-</span>threshold</code> (= 0.7) 
   </em> The maximal common prefix length considered is given by <code class="koka">prefix<span class="dash">-</span>len</code> (= 4)
   * The scale modifies the boosted amount (= 0.1). It is adjusted dynamically depending on the <code class="koka">prefix<span class="dash">-</span>len</code> to
     ensure no result can be higher then 1.0.
<br>
   <code class="koka"><a class="pp" href="#jaro_distance">jaro<span class="dash">-</span>distance<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>jaro<span class="dash">-</span>distance: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp">double</span></span></a>(<span class="st">&#34;martha&#34;</span>,<span class="st">&#34;marhta&#34;</span>) <span class="op">==</span> <span class="number">0.96</span></code><br>
   <code class="koka"><a class="pp" href="#jaro_distance">jaro<span class="dash">-</span>distance<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>jaro<span class="dash">-</span>distance: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">t</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp">double</span></span></a>(<span class="st">&#34;abrams&#34;</span>,<span class="st">&#34;abroms&#34;</span>) <span class="op">==</span> <span class="number">0.92</span></code>.
</p></div></div>
<div class="decl" id="with_builder"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_text_string-source.html#with_builder">with<span class="dash">-</span>builder</a></span>( <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">b</span> <span class="tp kw op">:</span> <a class="pp" href="#type_space_builder"><span class="tp">builder</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>builder: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_st"><span class="tp">st</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>st: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">   Do <code class="koka">action</code> with a given <code class="koka"><a class="pp" href="#type_space_builder"><span class="tp">builder</span><span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>string<span class="fslash last">/</span></span>builder: <span class="tp">H</span> <span class="tp kw op">-&gt;</span> <span class="tp">V</span></span></a></code> and return the <code class="koka"><a class="pp" href="std_core.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a></code> that was built.
</p></div></div>
<div class="decl" id="-private-imports"><div class="header code"><span class="def"><span class="kw">private import</span>&nbsp;<span class="code"><a class="pp" href="std_core.html"><span class="mo">std<span class="fslash">/</span>core</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core</span></span></a></span>, <span class="code"><a class="pp" href="std_data_array.html"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>array</span><span class="pc"><span class="mo">std<span class="fslash">/</span>data<span class="fslash">/</span>array</span></span></a></span></span></div></div>
</div></body>
</html>

<span data-line=""></span>