<!DOCTYPE html>
<html>
<!-- NO_CLICK_TRACKING -->

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>types.kk documentation</title>
</head>

<body class="koka doc body"><div class="madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2012-2020 Daan Leijen, Microsoft Corporation.

  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the file "license.txt" at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Defines core types.

   Some types and operations are required to be defined for the compiler
   to work correctly (i.e. types like &#96;:int&#96; or &#96;:div&#96;)
&#42;/</span>
<span class="kw">public</span> <span class="kw">module</span> types

<span class="kw">infixr</span> <span class="number">30</span>  <span class="op">((&amp;&amp;))</span>
<span class="kw">infixr</span> <span class="number">20</span>  <span class="op">((||))</span>

include <span class="kw">extern</span> {
  js file <span class="st">"types-inline.js"</span>
}
  
<span class="comment">// ----------------------------------------------------------------------------
// Core types
// ----------------------------------------------------------------------------
</span>
<span class="comment">// An arbitrary precision signed integer.
</span><span class="decl-type" id="type_space_int"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a></span>

<span class="comment">// A string is a sequence of unicode character points (&#96;char&#96;).
// The encoding of a string is internal and there
// is no constant-time indexing of characters in a string.
// Use the &#96;:sslice&#96; type for efficient matching and retrieving
// sub-strings from string.\
// See also the [&#96;&#96;std/text/string&#96;&#96;](std&#95;text&#95;string.html) module.
</span><span class="decl-type" id="type_space_string"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a></span>

<span class="comment">// A 64-bit IEEE 754 floating point value.
// See also &#96;std/num/double&#96; for more operations on &#96;:double&#96;s.
</span><span class="tp">value</span> <span class="decl-type" id="type_space_double"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a></span>

<span class="comment">// A 32-bit signed integer (represented in two's complement).
// See the [&#96;&#96;std/int32&#96;&#96;](std&#95;int32.html) module for operations on 32-bit integers.
</span><span class="tp">value</span> <span class="decl-type" id="type_space_int32"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_int32"><span class="tp">int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int32: <span class="tp">V</span></span></a></span>

<span class="comment">// A signed integer equal to &#96;size&#95;t&#96; in C. 
// Provides no operations but is used mostly for interaction with external code.
// The Javascript backend uses &#96;int32&#96; for this.
</span><span class="tp">value</span> <span class="decl-type" id="type_space_size__t"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_size__t"><span class="tp">size&#95;t</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>size&#95;t: <span class="tp">V</span></span></a></span>

<span class="comment">// A 8-bit unsigned integer (represented in two's complement).
// Provides no operations but is used mostly for interaction with external code.
</span><span class="tp">value</span> <span class="decl-type" id="type_space_uint8"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_uint8"><span class="tp">uint8</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>uint8: <span class="tp">V</span></span></a></span>

<span class="comment">// A 8-bit signed integer (represented in two's complement).
// Provides no operations but is used mostly for interaction with external code.
</span><span class="tp">value</span> <span class="decl-type" id="type_space_int8"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_int8"><span class="tp">int8</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int8: <span class="tp">V</span></span></a></span>

<span class="comment">// A 16-bit signed integer (represented in two's complement).
// Provides no operations but is used mostly for interaction with external code.
</span><span class="tp">value</span> <span class="decl-type" id="type_space_int16"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_int16"><span class="tp">int16</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int16: <span class="tp">V</span></span></a></span>

<span class="comment">// A 32-bit IEEE 754 floating point value.
// Not supported by the Javascript backend
// Provides no operations but is used mostly for interaction with external code.
</span><span class="tp">value</span> <span class="decl-type" id="type_space_float32"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_float32"><span class="tp">float32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>float32: <span class="tp">V</span></span></a></span>

<span class="comment">// An any type. Used for extern calls
</span><span class="tp">value</span> <span class="decl-type" id="type_space_any"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_any"><span class="tp">any</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>any: <span class="tp">V</span></span></a></span>

<span class="comment">// Internal type used for in-place update of unique pattern matches
</span><span class="decl-type" id="type_space_reuse"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_reuse"><span class="tp">reuse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>reuse: <span class="tp">V</span></span></a></span>

<span class="decl-fun" id="no_reuse"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#no_reuse">no-reuse<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>no<span class="dash">-</span>reuse: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">reuse</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_reuse"><span class="tp">reuse</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>reuse: <span class="tp">V</span></span></a> {
  c inline  <span class="st">"NULL"</span>
  js inline <span class="st">"null"</span>
</span>}

<span class="comment">// A unicode character.
// Characters are unicode &#95;codepoint&#95;\/s.
// This is different from a unicode &#95;grapheme&#95; which represents a single displayed
// symbol and can consists of multiple codepoints due to combining characters and marks.
// (see also the [&#96;&#96;std/text/unicode&#96;&#96;](std&#95;text&#95;unicode.html) module.)
</span>value <span class="decl-type" id="type_space_char"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_char"><span class="tp">char</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>char: <span class="tp">V</span></span></a></span>

<span class="comment">// The &#95;total&#95; effect represents the absence of any effect.
</span><span class="decl-type" id="type_space__lt__gt_"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">::</span> </span><span class="tp">E</span>

<span class="comment">// The effect constructor extends an effect with another effect.
</span><span class="decl-type" id="type_space__lt__bar__gt_"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lt__bar__gt_"><span class="tp">&lt;</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;|&gt;)): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><span class="tp kw op">|</span><span class="tp sp">&gt;</span> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span><span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> </span><span class="tp">E</span>

<span class="comment">// The type of immutable arrays is called &#96;:vector&#96;.
</span><span class="decl-type" id="type_space_vector"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_vector"><span class="tp">vector</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>vector: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a></span><span class="tp sp">&gt;</span>


<span class="comment">// The divergence effect: a divergent function may not terminate.
</span><span class="decl-type" id="type_space_div"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_div"><span class="tp"><span class="effect">div</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="tp">X</span></span></a> <span class="tp sp">::</span> </span><span class="tp">X</span>

<span class="comment">// The non-determism effect.
</span><span class="decl-type" id="type_space_ndet"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a> <span class="tp sp">::</span> </span><span class="tp">X</span>

<span class="comment">// The alloc effect signifies a function may allocate in a heap &#96;:h&#96;
</span><span class="decl-type" id="type_space_alloc"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_alloc"><span class="tp">alloc</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>alloc: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a> <span class="tp sp">::</span> <span class="tp">H</span> <span class="tp kw op">-></span> </span><span class="tp">X</span>

<span class="comment">// The read effect: signifies that a function may read from from heap &#96;:h&#96;.
</span><span class="decl-type" id="type_space_read"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a> <span class="tp sp">::</span> <span class="tp">H</span> <span class="tp kw op">-></span> </span><span class="tp">X</span>

<span class="comment">// The write effect: signifies that a function may write to heap &#96;:h&#96;.
</span><span class="decl-type" id="type_space_write"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a> <span class="tp sp">::</span> <span class="tp">H</span> <span class="tp kw op">-></span> </span><span class="tp">X</span>

<span class="comment">// Stateful funs can manipulate heap &#96;:h&#96; using allocations, reads and writes.
</span><span class="decl-alias" id="type_space_st"><span class="tp kw">alias</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_st"><span class="tp">st</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>st: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span> <span class="tp kw">=</span> <a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a><a class="pp" href="#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span> <a class="pp" href="#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span> <a class="pp" href="#type_space_alloc"><span class="tp">alloc</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>alloc: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span></span><span class="tp sp">&gt;</span>

<span class="comment">// The &#96;:global&#96; heap is a special heap constant to denote the global shared heap
</span><span class="decl-type" id="type_space_global"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_global"><span class="tp">global</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>global: <span class="tp">H</span></span></a> <span class="tp sp">::</span> </span><span class="tp">H</span>


<span class="comment">// ----------------------------------------------------------------------------
// Internal types
// ----------------------------------------------------------------------------
</span>
<span class="comment">// Optional is used internally by the compiler to pass optional arguments.
// It is usually displayed as &#96;:?a&#96; for some type &#96;:a&#96;.
</span><span class="decl-type" id="type_space_optional"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_optional"><span class="tp">optional</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <span class="comment">// The &#96;Optional&#96; constructor is used when an optional argument is given.
</span>  <span class="decl-con" id="con_space_Optional"><span class="kw">con</span> <span class="decl-fun" id="optional_ques_"><a class="pp">Optional<span class="pc">optional: <span class="tp">optional</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;2094</span><span class="tp sp">&gt;</span></span></a></span>(<a class="pp">value<span class="pc">value: <span class="number">96</span></span></a><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a></span>)
  <span class="comment">// &#96;None&#96; is used when an optional argument is not provided.
</span>  <span class="decl-con" id="con_space_None"><span class="kw">con</span> <span class="decl-fun" id="none_ques_"><a class="pp">None<span class="pc">optional: <span class="tp">optional</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;2106</span><span class="tp sp">&gt;</span></span></a></span></span>
</span>}

<span class="comment">// Handled effects are lifted to an atomic effect using the &#96;:handled&#96; type constructor
</span><span class="decl-type" id="type_space_handled"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_handled"><span class="tp">handled</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>handled: <span class="tp">HX</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a>    <span class="tp sp">::</span> <span class="tp">HX</span> <span class="tp kw op">-></span> </span><span class="tp">X</span>;

<span class="comment">// Linear effects are lifted to an atomic effect using the &#96;:handled1&#96; type constructor
</span><span class="decl-type" id="type_space_handled1"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_handled1"><span class="tp">handled1</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>handled1: <span class="tp">HX1</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a>   <span class="tp sp">::</span> <span class="tp">HX1</span> <span class="tp kw op">-></span> </span><span class="tp">X</span>;

<span class="comment">// The &#96;:inst&#96; effect is the default umbrella effect for effect instances
</span><span class="decl-type" id="type_space_inst"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_inst"><span class="tp">inst</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>inst: <span class="tp">HX</span></span></a> <span class="tp sp">::</span> <span class="tp">HX</span></span>


<span class="comment">// ----------------------------------------------------------------------------
// Standard Data types
// ----------------------------------------------------------------------------
</span>
<span class="comment">// The &#96;:void&#96; type is empty and has no constructors.
// See also the &#96;:()&#96; unit type and the &#96;:bool&#96; type.
</span><span class="decl-type" id="type_space_void"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_void"><span class="tp">void</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>void: <span class="tp">V</span></span></a></span>

<span class="comment">// The type of booleans has two inhabitants: &#96;True&#96; and &#96;False&#96;.
</span><span class="decl-type" id="type_space_bool"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  <span class="decl-con" id="con_space_False"><span class="kw">con</span> <span class="decl-fun" id="false_ques_"><a class="pp">False<span class="pc">bool: <span class="tp">bool</span></span></a></span></span>
  <span class="decl-con" id="con_space_True"><span class="kw">con</span> <span class="decl-fun" id="true_ques_"><a class="pp">True<span class="pc">bool: <span class="tp">bool</span></span></a></span></span>
</span>}

<span class="comment">// The unit type &#96;:()&#96; is inhabited by just a single value, namely &#96;()&#96;.
// See also the &#96;:void&#96; type and the &#96;:bool&#96; type.
</span><span class="decl-type" id="type_space__lp__rp_"><span class="tp kw">struct</span> <span class="decl-con" id="con_space__lp__rp_"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a></span></span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a>

<span class="comment">// A pair of values &#96;:a&#96; and &#96;:b&#96;.
</span><span class="decl-type" id="type_space__lp__comma__rp_"><span class="tp kw">struct</span> <span class="decl-con" id="con_space__lp__comma__rp_"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lp__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lp__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>(<span class="decl-fun" id="fst"><a class="pp">fst<span class="pc">fst: <span class="number">6</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>,<span class="decl-fun" id="snd"><a class="pp">snd<span class="pc">snd: <span class="number">7</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="tp">V</span></span></a></span></span>)

<span class="comment">// A triple of values.
</span><span class="decl-type" id="type_space__lp__comma__comma__rp_"><span class="tp kw">struct</span> <span class="decl-con" id="con_space__lp__comma__comma__rp_"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lp__comma__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">,</span><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lp__comma__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">c</span><span class="pc">c: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>(<span class="decl-fun" id="fst_1"><a class="pp">fst<span class="pc">fst: <span class="number">13</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>,<span class="decl-fun" id="snd_1"><a class="pp">snd<span class="pc">snd: <span class="number">14</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="tp">V</span></span></a>,<span class="decl-fun" id="thd"><a class="pp">thd<span class="pc">thd: <span class="number">15</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="tp">V</span></span></a></span></span>)

<span class="comment">// A quadruple of values.
</span><span class="decl-type" id="type_space__lp__comma__comma__comma__rp_"><span class="tp kw">struct</span> <span class="decl-con" id="con_space__lp__comma__comma__comma__rp_"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lp__comma__comma__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,,,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">,</span><span class="tp sp">,</span><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lp__comma__comma__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,,,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">c</span><span class="pc">c: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">d</span><span class="pc">d: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>(<span class="decl-fun" id="fst_2"><a class="pp">fst<span class="pc">fst: <span class="number">22</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>,<span class="decl-fun" id="snd_2"><a class="pp">snd<span class="pc">snd: <span class="number">23</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="tp">V</span></span></a>,<span class="decl-fun" id="thd_1"><a class="pp">thd<span class="pc">thd: <span class="number">24</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="tp">V</span></span></a>,<span class="decl-fun" id="field4"><a class="pp">field4<span class="pc">field4: <span class="number">25</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">d</span><span class="pc">d: <span class="tp">V</span></span></a></span></span>)

<span class="comment">// A quintuple of values.
</span><span class="decl-type" id="type_space__lp__comma__comma__comma__comma__rp_"><span class="tp kw">struct</span> <span class="decl-con" id="con_space__lp__comma__comma__comma__comma__rp_"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lp__comma__comma__comma__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,,,,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">,</span><span class="tp sp">,</span><span class="tp sp">,</span><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space__lp__comma__comma__comma__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(,,,,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">c</span><span class="pc">c: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">d</span><span class="pc">d: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">e</span><span class="pc">e: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>(<span class="decl-fun" id="fst_3"><a class="pp">fst<span class="pc">fst: <span class="number">33</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>,<span class="decl-fun" id="snd_3"><a class="pp">snd<span class="pc">snd: <span class="number">34</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="tp">V</span></span></a>,<span class="decl-fun" id="thd_2"><a class="pp">thd<span class="pc">thd: <span class="number">35</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">c</span><span class="pc">c: <span class="tp">V</span></span></a>,<span class="decl-fun" id="field4_1"><a class="pp">field4<span class="pc">field4: <span class="number">36</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">d</span><span class="pc">d: <span class="tp">V</span></span></a>,<span class="decl-fun" id="field5"><a class="pp">field5<span class="pc">field5: <span class="number">37</span></span></a></span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">e</span><span class="pc">e: <span class="tp">V</span></span></a></span></span>)

<span class="comment">// The &#96;:maybe&#96; type is used to represent either a value (&#96;Just(x)&#96;) or &#96;Nothing&#96;.
// This type is often used to represent values that can be &#95;null&#95;.
</span><span class="decl-type" id="type_space_maybe"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <span class="decl-con" id="con_space_Nothing"><span class="kw">con</span> <span class="decl-fun" id="nothing_ques_"><a class="pp">Nothing<span class="pc">maybe: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;2071</span><span class="tp sp">&gt;</span></span></a></span></span>
  <span class="decl-con" id="con_space_Just"><span class="kw">con</span> <span class="decl-fun" id="just_ques_"><a class="pp">Just<span class="pc">maybe: <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;2082</span><span class="tp sp">&gt;</span></span></a></span>( <a class="pp">value<span class="pc">value: <span class="number">91</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> </span>)
</span>}

<span class="comment">// The choice type represents one of two possible types &#96;:a&#96; or &#96;:b&#96;.
</span><span class="decl-type" id="type_space_either"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_either"><span class="tp">either</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>either: <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">b</span><span class="pc">b: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <span class="decl-con" id="con_space_Left"><span class="kw">con</span> <span class="decl-fun" id="left_ques_"><a class="pp">Left<span class="pc">either: <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;2045</span><span class="tp sp">,</span><span class="tp tv">&#95;2046</span><span class="tp sp">&gt;</span></span></a></span>( <a class="pp">left<span class="pc">left: <span class="number">61</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> </span>)
  <span class="decl-con" id="con_space_Right"><span class="kw">con</span> <span class="decl-fun" id="right_ques_"><a class="pp">Right<span class="pc">either: <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;2058</span><span class="tp sp">,</span><span class="tp tv">&#95;2059</span><span class="tp sp">&gt;</span></span></a></span>( <a class="pp">right<span class="pc">right: <span class="number">62</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">b</span><span class="pc">b: <span class="tp">V</span></span></a> </span>)
</span>}

<span class="comment">// An enumeration to represent order
</span><span class="decl-type" id="type_space_order"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_order"><span class="tp">order</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>order: <span class="tp">V</span></span></a> {
  <span class="decl-con" id="con_space_Lt"><a class="pp">Lt<span class="pc">order: <span class="tp">order</span></span></a></span>
  <span class="decl-con" id="con_space_Eq"><a class="pp">Eq<span class="pc">order: <span class="tp">order</span></span></a></span>
  <span class="decl-con" id="con_space_Gt"><a class="pp">Gt<span class="pc">order: <span class="tp">order</span></span></a></span>
</span>}

<span class="comment">// ----------------------------------------------------------------------------
// Standard functions
// ----------------------------------------------------------------------------
</span>
<span class="decl-fun" id="id"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#id">id<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>id: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp tv">&#95;2152</span></span></a> <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp tv">&#95;2152</span></span></a>
</span>}

<span class="comment">// Logical conjuction
</span><span class="decl-fun" id="_amp__amp_"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#_amp__amp_">(&amp;&amp;)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&amp;&amp;)): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {  <span class="comment">// inlined in the compiler for short-circuit evaluation
</span>  <span class="kw">if</span> (<a class="pp">x<span class="pc">x: <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">y<span class="pc">y: <span class="tp">bool</span></span></a> <span class="kw">else</span> <a class="pp" href="#con_space_False"><span class="co">False</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>False: <span class="tp">bool</span></span></a>
</span>}

<span class="comment">// Logical disjunction
</span><span class="decl-fun" id="_bar__bar_"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#_bar__bar_">(||)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((||)): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <span class="comment">// inlined in the compiler for short-circuit evaluation
</span>  <span class="kw">if</span> (<a class="pp">x<span class="pc">x: <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#con_space_True"><span class="co">True</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">bool</span></span></a>
</span>}

<span class="comment">// inline extern (&amp;&amp;) : (bool,bool) -&gt; bool  { inline "(#1 &amp;&amp; #2)" }
// inline extern (||) : (bool,bool) -&gt; bool  { inline "(#1 || #2)" }
</span>
<span class="comment">// for efficiency we use extern here (for now)
// fun (!)( b : bool ) : bool = if (x) then false else true
// fun not( b : bool ) : bool = if (x) then false else true
</span>
inline <span class="decl-external" id="not"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#not">not<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>not: <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>  <span class="tp kw op">:</span> <span class="tp sp">(</span><a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a>  { inline <span class="st">"!(#1)"</span> </span>}
inline <span class="decl-external" id="_excl_"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#_excl_">(!)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((!)): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>  <span class="tp kw op">:</span> <span class="tp sp">(</span><a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a>  { inline <span class="st">"!(#1)"</span> </span>}

<span class="comment">// needed for markers in &#96;std/core/hnd&#96;.
</span>inline <span class="decl-external" id="zero32"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#zero32">zero32<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>zero32: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int32</span></span></a>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_int32"><span class="tp">int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int32: <span class="tp">V</span></span></a> { inline <span class="st">"0"</span> </span>}

<span class="comment">// ----------------------------------------------------------------------------
// References
// ----------------------------------------------------------------------------
</span>
<span class="comment">// The predicate &#96;:hdiv&lt;h,a,e&gt;&#96; signifies that if the type &#96;:a&#96; contains a reference to &#96;:h&#96;,
// then the effect &#96;:e&#96; must contain the divergent effect (&#96;:div&#96;). This constraint is generated
// when reading from the heap (see &#96;(!)&#96;) and is necessary to catch cases where code can diverge
// by storing self referential functions in the heap.
</span><span class="decl-type" id="type_space_hdiv"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_hdiv"><span class="tp">hdiv</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>hdiv: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">P</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span><span class="tp">V</span><span class="tp sp">,</span><span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> </span><span class="tp">P</span>

<span class="comment">// The predicate &#96;:ediv&lt;x,a,e&gt;&#96; signifies that if the type &#96;:a&#96; contains a reference to effect constant &#96;:x",
// then the effect &#96;:e&#96; must contain the divergent effect (&#96;:div&#96;). This constraint is generated
// for operations on first-class effects where code can diverge through operations.
</span><span class="decl-type" id="type_space_ediv"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_ediv"><span class="tp">ediv</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ediv: <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">P</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span><span class="tp">V</span><span class="tp sp">,</span><span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> </span><span class="tp">P</span>


<span class="comment">// A reference &#96;:ref&lt;h,a&gt;&#96; points to a value of type &#96;:a&#96; in heap &#96;:h&#96;.
</span><span class="decl-type" id="type_space_ref"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_ref"><span class="tp">ref</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span><span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> </span><span class="tp">V</span>

<span class="comment">// Allocate a fresh reference with an initial value.
</span><span class="tp">inline</span> <span class="decl-external" id="ref"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#ref">ref<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">alloc</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="#type_space_alloc"><span class="tp">alloc</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>alloc: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space_ref"><span class="tp">ref</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  c inline <span class="st">"kk&#95;ref&#95;alloc(#1,kk&#95;context())"</span>
  cs inline <span class="st">"new Ref&lt;##1,##2&gt;(#1)"</span>
  js inline <span class="st">"{ value: #1 }"</span>
</span>}

<span class="comment">// Assign a new value to a reference.
</span>inline <span class="decl-external" id="set"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#set">set<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>set: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">write</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>  <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span><span class="tp kw op">:</span> <a class="pp" href="#type_space_ref"><span class="tp">ref</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span><span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a><a class="pp" href="#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span> <a class="pp" href="#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> {
  c inline <span class="st">"kk&#95;ref&#95;set(#1,#2,kk&#95;context())"</span>
  cs inline <span class="st">"#1.Set(#2)"</span>
  js inline <span class="st">"((#1).value = #2)"</span>
</span>}

<span class="comment">// Read the value of reference.
</span>inline <span class="decl-external" id="_excl__1"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#_excl_">(!)<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((!)): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> <span class="tp kw">with</span> <span class="tp">hdiv</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span><span class="tp kw op">:</span> <a class="pp" href="#type_space_ref"><span class="tp">ref</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ref: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span><a class="pp" href="#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;|&gt;)): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> <span class="tp kw">with</span><span class="tp sp">(</span><a class="pp" href="#type_space_hdiv"><span class="tp">hdiv</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>hdiv: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">P</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">)</span>  {
  c inline <span class="st">"kk&#95;ref&#95;get(#1,kk&#95;context())"</span>
  cs inline <span class="st">"#1.Value"</span>
  js inline <span class="st">"((#1).value)"</span>
</span>}


<span class="comment">// If a heap effect is unobservable, the heap effect can be erased by using the &#96;run&#96; fun.
// See also: &#95;State in Haskell, by Simon Peyton Jones and John Launchbury&#95;.
</span>inline <span class="decl-external" id="run"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#run">run<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>run: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">alloc</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><span class="tp">write</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_alloc"><span class="tp">alloc</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>alloc: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;|&gt;)): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>  {
  c  <span class="st">"(kk&#95;function&#95;call(kk&#95;box&#95;t,(kk&#95;function&#95;t,kk&#95;context&#95;t&#42;),#1,(#1,kk&#95;context())))"</span>
  cs inline <span class="st">"Primitive.Run&lt;##2&gt;(#1)"</span>
  js inline <span class="st">"((#1)())"</span>
</span>}

<span class="comment">// ----------------------------------------------------------------------------
// Local Variables
// ----------------------------------------------------------------------------
</span>
<span class="comment">// A local variable &#96;:var&lt;s,a&gt;&#96; points to a value of type &#96;:a&#96; in local scope &#96;:s&#96;
</span><span class="decl-type" id="type_space_local"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">)</span> <span class="tp kw op">-></span> </span><span class="tp">X</span>
<span class="decl-type" id="type_space_local_var"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_local_var"><span class="tp">local-var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="tp sp">::</span> <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span><span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> </span><span class="tp">V</span>

<span class="comment">// Allocate a fresh local with an initial value.
</span><span class="tp">inline</span> <span class="decl-external" id="local_new"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#local_new">local-new<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>new: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp">local<span class="dash">-</span>var</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">s</span><span class="pc">s: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span><span class="tp kw op">:</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space_local_var"><span class="tp">local-var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  c inline <span class="st">"kk&#95;ref&#95;alloc(#1,kk&#95;context())"</span>
  cs inline <span class="st">"new Ref&lt;##1,##2&gt;(#1)"</span>
  js inline <span class="st">"{ value: #1 }"</span>
</span>}

<span class="comment">// Assign a new value to a local variable
</span>inline <span class="decl-external" id="local_set"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#local_set">local-set<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>set: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">v</span> <span class="tp kw op">:</span> <span class="tp">local<span class="dash">-</span>var</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>  <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">s</span><span class="pc">s: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">l</span><span class="pc">l: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">v</span><span class="tp kw op">:</span> <a class="pp" href="#type_space_local_var"><span class="tp">local-var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span><span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a><a class="pp" href="#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">&gt;</span> <a class="pp" href="#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> {
  c inline <span class="st">"(kk&#95;ref&#95;set(#1,#2,kk&#95;context()))"</span>
  cs inline <span class="st">"#1.Set(#2)"</span>;
  js inline <span class="st">"((#1).value = #2)"</span>
</span>}

<span class="comment">// Read the value of a local variable.
</span>inline <span class="decl-external" id="local_get"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#local_get">local-get<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>get: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">v</span> <span class="tp kw op">:</span> <span class="tp">local<span class="dash">-</span>var</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> <span class="tp kw">with</span> <span class="tp">hdiv</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">s</span><span class="pc">s: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">v</span><span class="tp kw op">:</span> <a class="pp" href="#type_space_local_var"><span class="tp">local-var</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>var: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span><a class="pp" href="#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;|&gt;)): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> <span class="tp kw">with</span><span class="tp sp">(</span><a class="pp" href="#type_space_hdiv"><span class="tp">hdiv</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>hdiv: <span class="tp sp">(</span><span class="tp">H</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">P</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">s</span><span class="pc">s: <span class="tp">H</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span><span class="tp sp">)</span>  {
  c inline <span class="st">"(kk&#95;ref&#95;get(#1,kk&#95;context()))"</span>
  cs inline <span class="st">"#1.Value"</span>;
  js inline <span class="st">"((#1).value)"</span>;
</span>}

<span class="comment">// If local mutation is unobservable, the &#96;:local&#96; effect can be erased by using the &#96;local-scope&#96; function.
// See also: &#95;State in Haskell, by Simon Peyton Jones and John Launchbury&#95;.
</span>inline <span class="decl-external" id="local_scope"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#local_scope">local-scope<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local<span class="dash">-</span>scope: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">local</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="tp">H</span> <span class="tp kw op">-></span> <span class="tp">X</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">h</span><span class="pc">h: <span class="tp">H</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;|&gt;)): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>  {
  c  <span class="st">"(kk&#95;function&#95;call(kk&#95;box&#95;t,(kk&#95;function&#95;t,kk&#95;context&#95;t&#42;),#1,(#1,kk&#95;context())))"</span>
  cs inline <span class="st">"Primitive.Run&lt;##2&gt;(#1)"</span>;
  js inline <span class="st">"((#1)())"</span>;
</span>}

inline <span class="decl-external" id="byref"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#byref">byref<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>byref: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">loc</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>(loc <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a> { inline <span class="st">"#1"</span> </span>}

<span class="comment">// ----------------------------------------------------------------------------
// Unsafe: todo: move to separate module
// ----------------------------------------------------------------------------
</span>
<span class="comment">// &#95;Unsafe&#95;. Mark a function parameter as decreasing to suppress the non-termination effect (&#96;:div&#96;).
</span>inline <span class="decl-external" id="unsafe_decreasing"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#unsafe_decreasing">unsafe-decreasing<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>decreasing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>( x <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a> { inline <span class="st">"#1"</span> </span>}

<span class="decl-external" id="unsafe_total_cast"><span class="kw">private</span> inline <span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#unsafe_total_cast">unsafe-total-cast<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>total<span class="dash">-</span>cast: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span><span class="tp sp">)</span></span></a> <span class="tp kw op">:</span> <span class="tp kw">forall</span><span class="tp sp">&lt;</span><a class="pp"><span class="tp"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">,</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> <span class="tp sp">(</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> <span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">(</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a><span class="tp sp">)</span> { inline <span class="st">"#1"</span> </span>}

<span class="comment">// &#95;Unsafe&#95;. This function calls a function and pretends it did not have any effect at all.
</span><span class="decl-fun" id="unsafe_total"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#unsafe_total">unsafe-total<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>total: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span></span></a>( <a class="pp">action<span class="pc">action: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">&#95;2201</span> <span class="tp tv">&#95;2200</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a> {
  <a class="pp" href="#unsafe_total_cast">unsafe-total-cast<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>total<span class="dash">-</span>cast: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span><span class="tp sp">)</span></span></a>( <a class="pp">action<span class="pc">action: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">&#95;2201</span> <span class="tp tv">&#95;2200</span></span></a> )()
</span>}

<span class="comment">// &#95;Unsafe&#95;. This function pretends the give action was deterministic
</span><span class="decl-fun" id="unsafe_no_ndet"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#unsafe_no_ndet">unsafe-no-ndet<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>no<span class="dash">-</span>ndet: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">ndet</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a>( <a class="pp">action<span class="pc">action: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">ndet</span><span class="tp kw op">|</span><span class="tp tv">&#95;2184</span><span class="tp sp">&gt;</span> <span class="tp tv">&#95;2183</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_ndet"><span class="tp"><span class="effect">ndet</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a><a class="pp" href="#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;|&gt;)): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> {
  <a class="pp" href="#unsafe_total_cast">unsafe-total-cast<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>total<span class="dash">-</span>cast: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span><span class="tp sp">)</span></span></a>( <a class="pp">action<span class="pc">action: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">ndet</span><span class="tp kw op">|</span><span class="tp tv">&#95;2184</span><span class="tp sp">&gt;</span> <span class="tp tv">&#95;2183</span></span></a> )()
</span>}

<span class="comment">// &#95;Unsafe&#95;. This function pretends the give action is terminating
</span><span class="decl-fun" id="unsafe_no_div"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#unsafe_no_div">unsafe-no-div<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>no<span class="dash">-</span>div: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a>( <a class="pp">action<span class="pc">action: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp kw op">|</span><span class="tp tv">&#95;2167</span><span class="tp sp">&gt;</span> <span class="tp tv">&#95;2166</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_div"><span class="tp"><span class="effect">div</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="tp">X</span></span></a><a class="pp" href="#type_space__lt__bar__gt_"><span class="tp">|</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;|&gt;)): <span class="tp sp">(</span><span class="tp">X</span><span class="tp sp">,</span> <span class="tp">E</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">E</span></span></a><a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a><span class="tp sp">&gt;</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp"><span class="tp tv"><span class="effect">e</span></span><span class="pc">e: <span class="tp">E</span></span></a> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> {
  <a class="pp" href="#unsafe_total_cast">unsafe-total-cast<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>unsafe<span class="dash">-</span>total<span class="dash">-</span>cast: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span><span class="tp sp">)</span></span></a>( <a class="pp">action<span class="pc">action: <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">div</span><span class="tp kw op">|</span><span class="tp tv">&#95;2167</span><span class="tp sp">&gt;</span> <span class="tp tv">&#95;2166</span></span></a> )()
</span>}

<span class="comment">// ----------------------------------------------------------------------------
// These primitives are used by the compiler for 
// &#95;tail recursion module cons&#95; (TRMC) optimization.
// ----------------------------------------------------------------------------
</span>
<span class="comment">// &#95;Internal&#95;. Internal type for &#95;tail recursion module cons&#95; (TRMC) optimization.
</span>value <span class="decl-type" id="type_space_ctail"><span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core_types.html#type_space_ctail"><span class="tp">ctail</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ctail: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp">a</span><span class="pc">a: <span class="tp">V</span></span></a></span><span class="tp sp">&gt;</span>  

<span class="tp">inline</span> <span class="kw">extern</span> <span class="st">".ctail-hole"</span>() <span class="tp kw op">:</span> <a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a> { }
inline <span class="kw">extern</span> <span class="st">".ctail-create"</span>(obj <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>, cname <span class="tp kw op">:</span> <a class="pp" href="#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, field <span class="tp kw op">:</span> <a class="pp" href="#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="#type_space_ctail"><span class="tp">ctail</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ctail: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> { }
inline <span class="kw">extern</span> <span class="st">".ctail-next"</span>(acc <span class="tp kw op">:</span> <a class="pp" href="#type_space_ctail"><span class="tp">ctail</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ctail: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, res <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>, obj <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a>, cname <span class="tp kw op">:</span> <a class="pp" href="#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> , field <span class="tp kw op">:</span> <a class="pp" href="#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_ctail"><span class="tp">ctail</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ctail: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> { }
inline <span class="kw">extern</span> <span class="st">".ctail-set"</span>( acc <span class="tp kw op">:</span> <a class="pp" href="#type_space_ctail"><span class="tp">ctail</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ctail: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>, res <span class="tp kw op">:</span> <a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> { }
inline <span class="kw">extern</span> <span class="st">".ctail-get"</span>( acc <span class="tp kw op">:</span> <a class="pp" href="#type_space_ctail"><span class="tp">ctail</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ctail: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space__lt__gt_"><span class="tp"><span class="effect">a</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>((&lt;&gt;)): <span class="tp">E</span></span></a> { }
inline <span class="kw">extern</span> <span class="st">".ctail-alloc"</span>() <span class="tp kw op">:</span> <a class="pp" href="#type_space_ctail"><span class="tp">ctail</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>ctail: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp"><span class="tp tv">a</span><span class="pc">a: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> { }
</pre>

</div></body>
</html>
